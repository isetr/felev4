(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk;a=window;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JSModule=c.JSModule||{};e=b.Collections=b.Collections||{};f=e.EqualityComparer=e.EqualityComparer||{};g=b.MacroModule=b.MacroModule||{};h=g.EquatableEqualityComparer=g.EquatableEqualityComparer||{};i=g.BaseEqualityComparer=g.BaseEqualityComparer||{};j=e.Comparer=e.Comparer||{};k=g.ComparableComparer=g.ComparableComparer||{};l=g.BaseComparer=g.BaseComparer||{};m=c.Pervasives=c.Pervasives||{};n=b.Json=b.Json||{};o=b.Remoting=b.Remoting||{};p=o.XhrProvider=o.XhrProvider||{};q=o.AjaxRemotingProvider=o.AjaxRemotingProvider||{};r=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};s=b.PrintfHelpers=b.PrintfHelpers||{};t=b.Concurrency=b.Concurrency||{};u=t.Scheduler=t.Scheduler||{};v=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};w=b.Enumerator=b.Enumerator||{};x=w.T=w.T||{};y=b.HtmlContentExtensions=b.HtmlContentExtensions||{};z=y.SingleNode=y.SingleNode||{};A=b.Activator=b.Activator||{};B=b.Arrays=b.Arrays||{};C=b.Seq=b.Seq||{};D=b.List=b.List||{};E=b.Arrays2D=b.Arrays2D||{};F=b.CancellationTokenSource=b.CancellationTokenSource||{};G=b.Char=b.Char||{};H=b.Util=b.Util||{};I=b.DateUtil=b.DateUtil||{};J=b.Delegate=b.Delegate||{};K=e.DictionaryUtil=e.DictionaryUtil||{};L=e.KeyCollection=e.KeyCollection||{};M=e.ValueCollection=e.ValueCollection||{};N=e.Dictionary=e.Dictionary||{};O=b.MatchFailureException=b.MatchFailureException||{};P=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};Q=b.OperationCanceledException=b.OperationCanceledException||{};R=b.ArgumentException=b.ArgumentException||{};S=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};T=b.InvalidOperationException=b.InvalidOperationException||{};U=b.AggregateException=b.AggregateException||{};V=b.TimeoutException=b.TimeoutException||{};W=b.FormatException=b.FormatException||{};X=b.Guid=b.Guid||{};Y=e.HashSetUtil=e.HashSetUtil||{};Z=e.HashSet=e.HashSet||{};_0=b.Lazy=b.Lazy||{};_1=D.T=D.T||{};_2=b.Nullable=b.Nullable||{};_3=b.Ref=b.Ref||{};_4=b.Operators=b.Operators||{};_5=b.Slice=b.Slice||{};_6=b.Option=b.Option||{};_7=b.Queue=b.Queue||{};_8=b.Random=b.Random||{};_9=a.Microsoft=a.Microsoft||{};_=_9.FSharp=_9.FSharp||{};$=_.Core=_.Core||{};ba=$.FSharpRef=$.FSharpRef||{};bb=b.Control=b.Control||{};bc=b.Stack=b.Stack||{};bd=b.Strings=b.Strings||{};be=b.Task=b.Task||{};bf=b.Task1=b.Task1||{};bg=b.TaskCompletionSource=b.TaskCompletionSource||{};bh=b.Unchecked=b.Unchecked||{};bi=a.IntelliFactory;bj=bi&&bi.Runtime;bk=a.String;d.LogMore=function(bl){if(a.console)a.console.log.apply(a.console,bl);};d.Log=function(bl){if(a.console)a.console.log(bl);};d.ForEach=function(bl,bm){var bn;for(var bo in bl)if(bm(bo))break;};d.GetFieldValues=function(bl){var bm,bn;bm=[];for(var bo in bl)bm.push(bl[bo]);return bm;};d.GetFieldNames=function(bl){var bm,bn;bm=[];for(var bo in bl)bm.push(bo);return bm;};d.GetFields=function(bl){var bm,bn;bm=[];for(var bo in bl)bm.push([bo,bl[bo]]);return bm;};d.Delete=function(bl,bm){return delete bl[bm];};f=e.EqualityComparer=bj.Class({CGetHashCode0:function(bl){return this.GetHashCode(bl);},CEquals0:function(bl,bm){return this.Equals(bl,bm);},CGetHashCode:function(bl){return this.GetHashCode(bl);},CEquals:function(bl,bm){return this.Equals(bl,bm);}},null,f);f.New=bj.Ctor(function(){},f);h=g.EquatableEqualityComparer=bj.Class({GetHashCode:function(bl){return bh.Hash(bl);},Equals:function(bl,bm){return bl.EEquals(bm);}},f,h);h.New=bj.Ctor(function(){f.New.call(this);null;},h);i=g.BaseEqualityComparer=bj.Class({GetHashCode:function(bl){return bh.Hash(bl);},Equals:function(bl,bm){return bh.Equals(bl,bm);}},f,i);i.New=bj.Ctor(function(){f.New.call(this);null;},i);j=e.Comparer=bj.Class({Compare0:function(bl,bm){return this.Compare$1(bl,bm);},Compare:function(bl,bm){return this.Compare$1(bl,bm);}},null,j);j.New=bj.Ctor(function(){},j);k=g.ComparableComparer=bj.Class({Compare$1:function(bl,bm){return bl.CompareTo(bm);}},j,k);k.New=bj.Ctor(function(){j.New.call(this);null;},k);l=g.BaseComparer=bj.Class({Compare$1:function(bl,bm){return _4.Compare(bl,bm);}},j,l);l.New=bj.Ctor(function(){j.New.call(this);null;},l);m.GetJS=function(bl,bm){var bn,bo;bn=bl;bo=w.Get(bm);try{while(bo.MoveNext())bn=bn[bo.Current()];}finally{if("Dispose"in bo)bo.Dispose();}return bn;};m.NewFromSeq=function(bl){var bm,bn,bo;bm={};bn=w.Get(bl);try{while(bn.MoveNext()){bo=bn.Current();bm[bo[0]]=bo[1];}}finally{if("Dispose"in bn)bn.Dispose();}return bm;};n.Activate=function(bl){var bn,bo,bp;function bm(bq){var br,bs,bt,bu,bv;return bh.Equals(bq,null)?bq:typeof bq=="object"?bq instanceof a.Array?n.shallowMap(bm,bq):(br=n.shallowMap(bm,bq.$V),(bs=bq.$T,bh.Equals(typeof bs,"undefined")?br:(bt=B.get(bn,bs),bt===a.WebSharper.List.T?D.ofArray(br):(bu=(bv=B.get(bn,bs),new bv()),(d.ForEach(br,function(bw){bu[bw]=br[bw];return false;}),bu))))):bq;}bn=bl.$TYPES;for(bo=0,bp=B.length(bn)-1;bo<=bp;bo++)B.set(bn,bo,n.lookup(B.get(bn,bo)));return bm(bl.$DATA);};n.shallowMap=function(bl,bm){var bn;return bm instanceof a.Array?B.map(bl,bm):typeof bm=="object"?(bn={},(d.ForEach(bm,function(bo){bn[bo]=bl(bm[bo]);return false;}),bn)):bm;};n.lookup=function(bl){var bm,bn,bo,bp,bq;bo=B.length(bl);bm=a;bn=0;while(bn<bo){bp=B.get(bl,bn);bq=bm[bp];!bh.Equals(typeof bq,void 0)?(bm=bq,void(bn=bn+1)):_4.FailWith("Invalid server reply. Failed to find type: "+bp);}return bm;};p=o.XhrProvider=bj.Class({Sync:function(bl,bm,bn){var bo;bo=[null];o.ajax(false,bl,bm,bn,function(bp){bo[0]=bp;},function(bp){throw bp;},function(){o.ajax(false,bl,bm,bn,function(bp){bo[0]=bp;},function(bp){throw bp;},void 0);});return bo[0];},Async:function(bl,bm,bn,bo,bp){o.ajax(true,bl,bm,bn,bo,bp,function(){o.ajax(true,bl,bm,bn,bo,bp,void 0);});}},null,p);p.New=bj.Ctor(function(){},p);q=o.AjaxRemotingProvider=bj.Class({get_EndPoint:function(){return o.EndPoint();},AsyncBase:function(bl,bm){var bn;bn=this;return t.Delay(function(){var bo,bp,bq;bo=o.makeHeaders(bl);bp=o.makePayload(bm);bq=t.GetCT();return t.Bind(bq,function(br){return t.FromContinuations(function(bs,bt,bu){var bv,bw,bx,by;bv=[true];bw=(bx=function(){return bv[0]?(bv[0]=false,bu(Q.New.call(this,t.noneCT()))):null;},t.Register(br,function(){bx();}));by=bn.get_EndPoint();return o.AjaxProvider().Async(by,bo,bp,function(bz){if(bv[0]){bv[0]=false;bw.Dispose();bs(n.Activate(a.JSON.parse(bz)));}},function(bz){if(bv[0]){bv[0]=false;bw.Dispose();bt(bz);}});});});});},Send:function(bl,bm){var bn;bn=t.Ignore(this.AsyncBase(bl,bm));t.Start(bn,null);},Task:function(bl,bm){var bn;bn=this.AsyncBase(bl,bm);return t.StartAsTask(bn,null);},Async:function(bl,bm){return this.AsyncBase(bl,bm);},Sync:function(bl,bm){var bn,bo,bp,bq;bn=(bo=this.get_EndPoint(),(bp=o.makeHeaders(bl),(bq=o.makePayload(bm),o.AjaxProvider().Sync(bo,bp,bq))));return n.Activate(a.JSON.parse(bn));}},null,q);q.New=bj.Ctor(function(){},q);o.ajax=function(bl,bm,bn,bo,bp,bq,br){var bs,bt,bu;bs=new a.XMLHttpRequest();bt=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bs.open("POST",bm,bl);if(bl==true)bs.withCredentials=true;for(var bw in bn)bs.setRequestHeader(bw,bn[bw]);if(bt)bs.setRequestHeader("x-csrftoken",bt);function bv(){var bx;if(bs.status==200)bp(bs.responseText);else if(br&&bs.status==403&&bs.responseText=="CSRF")br();else{bx="Response status is not 200: ";bq(new a.Error(bx+bs.status));}}if("onload"in bs)bs.onload=bs.onerror=bs.onabort=bv;else bs.onreadystatechange=function(){if(bs.readyState==4)bv();};bs.send(bo);};o.makePayload=function(bl){return a.JSON.stringify(bl);};o.makeHeaders=function(bl){return{"x-websharper-rpc":bl,"content-type":"application/json"};};o.AjaxProvider=function(){r.$cctor();return r.AjaxProvider;};o.set_AjaxProvider=function(bl){r.$cctor();r.AjaxProvider=bl;};o.UseHttps=function(){var bl,bm;try{return!(bl=a.window.location.href,bd.StartsWith(bl,"https://"))?(o.set_EndPoint((bm=a.window.location.href,bd.Replace(bm,"http://","https://"))),true):false;}catch(bn){return false;}};o.EndPoint=function(){r.$cctor();return r.EndPoint;};o.set_EndPoint=function(bl){r.$cctor();r.EndPoint=bl;};r.$cctor=bj.Cctor(function(){r.EndPoint="?";r.AjaxProvider=new p.New();r.$cctor=a.ignore;});s.prettyPrint=function(bl){var bm,bn,bo,bp,bq;return bl===null?"null":(bm=typeof bl,bm=="string"?"\""+bl+"\"":bm=="object"?bl instanceof a.Array?"[|"+(bn=B.map(s.prettyPrint,bl),bd.concat("; ",bn))+"|]":(bo=a.String(bl),bo==="[object Object]"?"{"+(bp=(bq=function(br,bs){return br+" = "+s.prettyPrint(bs);},function(br){return B.map(function(bs){return bq(bs[0],bs[1]);},br);}(d.GetFields(bl))),bd.concat("; ",bp))+"}":bo):a.String(bl));};s.printArray2D=function(bl,bm){return bm===null?"null":"[["+bd.concat("][",C.delay(function(){var bn;bn=bm.length?bm[0].length:0;return C.map(function(bo){return bd.concat("; ",C.delay(function(){return C.map(function(bp){return bl(B.get2D(bm,bo,bp));},_4.range(0,bn-1));}));},_4.range(0,bm.length-1));}))+"]]";};s.printArray=function(bl,bm){var bn;return bm===null?"null":"[|"+(bn=B.map(bl,bm),bd.concat("; ",bn))+"|]";};s.printList=function(bl,bm){return"["+bd.concat("; ",C.map(bl,bm))+"]";};s.padNumLeft=function(bl,bm){var bn,bo;bn=B.get(bl,0);return((bn===" "?true:bn==="+")?true:bn==="-")?bn+(bo=bl.substr(1),bd.PadLeftWith(bo,bm-1,48)):bd.PadLeftWith(bl,bm,48);};s.spaceForPos=function(bl,bm){return 0<=bl?" "+bm:bm;};s.plusForPos=function(bl,bm){return 0<=bl?"+"+bm:bm;};s.toSafe=function(bl){return bl==null?"":bl;};u=t.Scheduler=bj.Class({tick:function(){var bl,bm,bn,bo,bp;bm=this;bn=a.Date.now();bl=true;while(bl){bo=this.robin.length;bo===0?(this.idle=true,void(bl=false)):((this.robin.shift())(),a.Date.now()-bn>40?(bp=a.setTimeout(function(){bm.tick();},0),void 0,void(bl=false)):null);}},Fork:function(bl){var bm,bn;bm=this;this.robin.push(bl);this.idle?(this.idle=false,(bn=a.setTimeout(function(){bm.tick();},0),void 0)):null;}},null,u);u.New=bj.Ctor(function(){this.idle=true;this.robin=[];null;},u);t.For=function(bl,bm){return t.Using(w.Get(bl),function(bn){return t.While(function(){return bn.MoveNext();},t.Delay(function(){return bm(bn.Current());}));});};t.While=function(bl,bm){return bl()?t.Bind(bm,function(){return t.While(bl,bm);}):t.Return();};t.Using=function(bl,bm){return t.TryFinally(bm(bl),function(){bl.Dispose();});};t.TryCancelled=function(bl,bm){return t.checkCancel(function(bn){bl({k:function(bo){if(bo.$==2){bm(bo.$0);bn.k(bo);}else bn.k(bo);},ct:bn.ct});});};t.OnCancel=function(bl){return t.checkCancel(function(bm){bm.k({$:0,$0:t.Register(bm.ct,bl)});});};t.StartChild=function(bl,bm){return t.checkCancel(function(bn){var bo,bp,bq,br;bo=[true];bp=[null];bq=[];br=(bm!=null?bm.$==1:false)?{$:1,$0:a.setTimeout(function(){var bs;bo[0]=false;bs={$:1,$0:new V.New()};while(bq.length>0)(bq.shift())(bs);},bm.$0)}:null;t.scheduler().Fork(function(){bl({k:function(bs){if(bo[0]){bp[0]={$:1,$0:bs};(br!=null?br.$==1:false)?a.clearTimeout(br.$0):null;while(bq.length>0)(bq.shift())(bs);}},ct:bn.ct});});bn.k({$:0,$0:t.checkCancel(function(bs){var bt;if(bo[0]){bt=bp[0];bt==null?bq.push(bs.k):bs.k(bt.$0);}else bs.k({$:1,$0:new V.New()});})});});};t.Parallel=function(bl){var bm;bm=B.ofSeq(bl);return B.length(bm)===0?t.Return([]):t.checkCancel(function(bn){var bo,bp,bq,br;bo=bm.length;bp=[bo];bq=new a.Array(bo);br=function(bs,bt){var bu,bv;bv=bp[0];switch(bv===0?0:bv===1?bt.$==0?1:(bu=[bv,bt],3):bt.$==0?2:(bu=[bv,bt],3)){case 0:return null;break;case 1:B.set(bq,bs,bt.$0);bp[0]=0;return bn.k({$:0,$0:bq});break;case 2:B.set(bq,bs,bt.$0);bp[0]=bv-1;break;case 3:bp[0]=0;return bn.k(bu[1]);break;}};B.iteri(function(bs,bt){return t.scheduler().Fork(function(){bt({k:function(bu){return br(bs,bu);},ct:bn.ct});});},bm);});};t.Sleep=function(bl){return t.checkCancel(function(bm){var bn,bo,bp,bq;function br(){return a.setTimeout(function(){_0.Force(bo).Dispose();t.scheduler().Fork(function(){bm.k({$:0,$0:null});});},bl);}function bs(){return t.Register(bm.ct,function(){var bt;bt=_0.Force(bn);a.clearTimeout(bt);t.scheduler().Fork(function(){t.cancel(bm);});});}bn=_0.Create(br);bo=_0.Create(bs);bp=_0.Force(bn);bq=_0.Force(bo);});};t.StartAsTask=function(bl,bm){var bn;bn=new bg.New();t.StartWithContinuations(bl,function(bo){bn.SetResult(bo);},function(bo){bn.SetException$1(bo);},function(){bn.SetCanceled();},bm);return bn.get_Task();};t.AwaitTask1=function(bl){return t.FromContinuations(function(bm,bn,bo){var bp;bh.Equals(bl.get_Status(),0)?bl.Start():null;bp=bl.ContinueWith$2(function(bq){return bq.get_IsCanceled()?bo(Q.New.call(this,t.noneCT())):bq.get_IsFaulted()?bn(bq.get_Exception()):bm(bq.get_Result());});});};t.AwaitTask=function(bl){return t.FromContinuations(function(bm,bn,bo){var bp;bh.Equals(bl.get_Status(),0)?bl.Start():null;bp=bl.ContinueWith$2(function(bq){return bq.get_IsCanceled()?bo(Q.New.call(this,t.noneCT())):bq.get_IsFaulted()?bn(bq.get_Exception()):bm();});});};t.AwaitEvent=function(bl,bm){return t.checkCancel(function(bn){var bo,bp,bq,br;function bs(){return H.subscribeTo(bl,function(bu){_0.Force(bo).Dispose();_0.Force(bp).Dispose();t.scheduler().Fork(function(){bn.k({$:0,$0:bu});});});}function bt(){return t.Register(bn.ct,function(){if(bm!=null?bm.$==1:false)bm.$0();else{_0.Force(bo).Dispose();t.scheduler().Fork(function(){t.cancel(bn);});}});}bo=_0.Create(bs);bp=_0.Create(bt);bq=_0.Force(bo);br=_0.Force(bp);});};t.Start=function(bl,bm){t.StartWithContinuations(bl,function(){},function(bn){a.console.log.apply(a.console,["WebSharper: Uncaught asynchronous exception"].concat([bn]));},function(bn){},bm);};t.StartWithContinuations=function(bl,bm,bn,bo,bp){var bq;bq=_4.DefaultArg(bp,(t.defCTS())[0]);t.scheduler().Fork(function(){bl({k:function(br){if(br.$==1)bn(br.$0);else if(br.$==2)bo(br.$0);else bm(br.$0);},ct:bq});});};t.FromContinuations=function(bl){return t.checkCancel(function(bm){var bn,bo;bn=[false];bo=function(bp){if(bn[0])_4.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bn[0]=true;t.scheduler().Fork(bp);}};bl(function(bp){bo(function(){bm.k({$:0,$0:bp});});},function(bp){bo(function(){bm.k({$:1,$0:bp});});},function(bp){bo(function(){bm.k({$:2,$0:bp});});});});};t.GetCT=function(){v.$cctor();return v.GetCT;};t.Catch=function(bl){return t.checkCancel(function(bm){try{bl({k:function(bn){if(bn.$==0)bm.k({$:0,$0:{$:0,$0:bn.$0}});else if(bn.$==1)bm.k({$:0,$0:{$:1,$0:bn.$0}});else bm.k(bn);},ct:bm.ct});}catch(bn){bm.k({$:0,$0:{$:1,$0:bn}});}});};t.TryWith=function(bl,bm){return t.checkCancel(function(bn){bl({k:function(bo){if(bo.$==0)bn.k({$:0,$0:bo.$0});else if(bo.$==1)try{(bm(bo.$0))(bn);}catch(bp){bn.k(bo);}else bn.k(bo);},ct:bn.ct});});};t.TryFinally=function(bl,bm){return t.checkCancel(function(bn){bl({k:function(bo){try{bm();bn.k(bo);}catch(bp){bn.k({$:1,$0:bp});}},ct:bn.ct});});};t.Delay=function(bl){return t.checkCancel(function(bm){try{(bl(null))(bm);}catch(bn){bm.k({$:1,$0:bn});}});};t.Ignore=function(bl){return t.Bind(bl,function(){return t.Return();});};t.Combine=function(bl,bm){return t.Bind(bl,function(){return bm;});};t.Bind=function(bl,bm){return t.checkCancel(function(bn){bl({k:function(bo){var bp;if(bo.$==0){bp=bo.$0;t.scheduler().Fork(function(){try{(bm(bp))(bn);}catch(bq){bn.k({$:1,$0:bq});}});}else t.scheduler().Fork(function(){bn.k(bo);});},ct:bn.ct});});};t.Return=function(bl){return t.checkCancel(function(bm){bm.k({$:0,$0:bl});});};t.checkCancel=function(bl){return function(bm){if(bm.ct.c)t.cancel(bm);else bl(bm);};};t.cancel=function(bl){bl.k({$:2,$0:new Q.New(bl.ct)});};t.defCTS=function(){v.$cctor();return v.defCTS;};t.scheduler=function(){v.$cctor();return v.scheduler;};t.Register=function(bl,bm){var bn;return bl===t.noneCT()?{Dispose:function(){return null;}}:(bn=bl.r.push(bm)-1,{Dispose:function(){return B.set(bl.r,bn,function(){});}});};t.noneCT=function(){v.$cctor();return v.noneCT;};v.$cctor=bj.Cctor(function(){v.noneCT={c:false,r:[]};v.scheduler=new u.New();v.defCTS=[new F.New()];v.GetCT=t.checkCancel(function(bl){bl.k({$:0,$0:bl.ct});});v.$cctor=a.ignore;});x=w.T=bj.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},null,x);x.New=bj.Ctor(function(bl,bm,bn,bo){this.s=bl;this.c=bm;this.n=bn;this.d=bo;null;},x);w.Get0=function(bl){return bl instanceof a.Array?w.ArrayEnumerator(bl):bh.Equals(typeof bl,"string")?w.StringEnumerator(bl):"GetEnumerator0"in bl?bl.GetEnumerator0():bl.GetEnumerator();};w.Get=function(bl){return bl instanceof a.Array?w.ArrayEnumerator(bl):bh.Equals(typeof bl,"string")?w.StringEnumerator(bl):bl.GetEnumerator();};w.StringEnumerator=function(bl){return new x.New(0,null,function(bm){var bn;bn=bm.s;return bn<bl.length?(bm.c=bl.charCodeAt(bn),bm.s=bn+1,true):false;},void 0);};w.ArrayEnumerator=function(bl){return new x.New(0,null,function(bm){var bn;bn=bm.s;return bn<B.length(bl)?(bm.c=B.get(bl,bn),bm.s=bn+1,true):false;},void 0);};z=y.SingleNode=bj.Class({ReplaceInDom:function(bl){var bm;bm=this.node.parentNode.replaceChild(this.node,bl);}},null,z);z.New=bj.Ctor(function(bl){this.node=bl;null;},z);A.hasDocument=function(){return typeof a.document!=="undefined";};A.Activate=function(){var bl,bm;if(A.hasDocument()){bl=a.document.getElementById("websharper-data");bl?(bm=a.document,a.jQuery(bm)).ready(function(){var bn,bo,bp;bn=bl.getAttribute("content");bo=n.Activate(a.JSON.parse(bn));bp=function(bq,br){var bs;bs=br.Body();bs.ReplaceInDom(a.document.getElementById(bq));};return function(bq){B.iter(function(br){return bp(br[0],br[1]);},bq);}(d.GetFields(bo));}):null;}};B.splitInto=function(bl,bm){var bn,bo,bp,bq,br,bs,bt,bu,bv;if(bl<=0)_4.FailWith("Count must be positive");bo=B.length(bm);if(bo===0)return[];else{bp=_4.Min(bl,bo);bq=B.create(bp,null);br=bo/bp>>0;bn=0;for(bs=0,bt=bo%bp-1;bs<=bt;bs++){bq[bs]=B.sub(bm,bn,br+1);bn=bn+br+1;}for(bu=bo%bp,bv=bp-1;bu<=bv;bu++){bq[bu]=B.sub(bm,bn,br);bn=bn+br;}return bq;}};B.contains=function(bl,bm){var bn,bo,bp,bq;bn=true;bo=0;bq=B.length(bm);while(bn?bo<bq:false)if(bh.Equals(bm[bo],bl))bn=false;else bo=bo+1;return!bn;};B.tryFindBack=function(bl,bm){var bn,bo,bp;bn=null;bo=bm.length-1;while(bo>=0?bn==null:false){bp=bm[bo];bl(bp)?void(bn={$:1,$0:bp}):null;bo=bo-1;}return bn;};B.tryFindIndexBack=function(bl,bm){var bn,bo;bn=null;bo=bm.length-1;while(bo>=0?bn==null:false){bl(B.get(bm,bo))?void(bn={$:1,$0:bo}):null;bo=bo-1;}return bn;};B.mapFold=function(bl,bm,bn){var bo,bp,bq,br,bs,bt;bq=(bo=bn.length,new a.Array(bo));bp=bm;for(br=0,bs=bn.length-1;br<=bs;br++){bt=bl(bp,bn[br]);bq[br]=bt[0];bp=bt[1];}return[bq,bp];};B.mapFoldBack=function(bl,bm,bn){var bo,bp,bq,br,bs,bt,bu,bv,bw;br=(bo=bm.length,new a.Array(bo));bp=bn;bs=bm.length;for(bt=1,bu=bs;bt<=bu;bt++){bv=bs-bt;bw=bl(bm[bv],bp);br[bv]=bw[0];bp=bw[1];}return[br,bp];};B.mapInPlace=function(bl,bm){var bn,bo;for(bn=0,bo=bm.length-1;bn<=bo;bn++)bm[bn]=bl(bm[bn]);};B.mapiInPlace=function(bl,bm){var bn,bo;for(bn=0,bo=bm.length-1;bn<=bo;bn++)bm[bn]=bl(bn,bm[bn]);return bm;};B.sortInPlaceByDescending=function(bl,bm){var bn,bo;bn=function(bp){return bp[0];};(function(bp){B.mapInPlace(bn,bp);}((bo=B.mapiInPlace(function(bp,bq){return[bq,[bl(bq),bp]];},bm),bo.sort(function(bp,bq){return-_4.Compare(bp[1],bq[1]);}))));};C.tryHead=function(bl){var bm;bm=w.Get(bl);try{return bm.MoveNext()?{$:1,$0:bm.Current()}:null;}finally{if("Dispose"in bm)bm.Dispose();}};C.tryItem=function(bl,bm){var bn,bo,bp;if(bl<0)return null;else{bn=0;bo=w.Get(bm);try{bp=true;while(bp?bn<=bl:false)if(bo.MoveNext())bn=bn+1;else bp=false;return bp?{$:1,$0:bo.Current()}:null;}finally{if("Dispose"in bo)bo.Dispose();}}};C.tryLast=function(bl){var bm,bn;bm=w.Get(bl);try{if(bm.MoveNext()){while(bm.MoveNext());bn={$:1,$0:bm.Current()};}else bn=null;return bn;}finally{if("Dispose"in bm)bm.Dispose();}};C.chunkBySize=function(bl,bm){bl<=0?_4.FailWith("Chunk size must be positive"):null;return{GetEnumerator:function(){var bn;bn=w.Get(bm);return new x.New(null,null,function(bo){var bp,bq;if(bn.MoveNext()){bp=[bn.Current()];while(B.length(bp)<bl?bn.MoveNext():false){bq=bp.push(bn.Current());}bo.c=bp;return true;}else return false;},function(){bn.Dispose();});}};};B.countBy=function(bl,bm){var bn,bo,bp,bq,br,bs,bt;bo=new N.New$5();bp=a.Array.prototype.constructor.apply(a.Array,[]);for(bq=0,br=B.length(bm)-1;bq<=br;bq++){bs=bl(bm[bq]);bo.ContainsKey(bs)?bo.set_Item(bs,bo.get_Item(bs)+1):(bt=bp.push(bs),void 0,bo.Add(bs,1));}bn=function(bu){return[bu,bo.get_Item(bu)];};(function(bu){B.mapInPlace(bn,bu);}(bp));return bp;};C.except=function(bl,bm){return{GetEnumerator:function(){var bn,bo;bn=w.Get(bm);bo=new Z.New$2(bl);return new x.New(null,null,function(bp){var bq,br;if(bn.MoveNext()){bq=bn.Current();br=bo.Add(bq);while(!br?bn.MoveNext():false){bq=bn.Current();br=bo.Add(bq);}return br?(bp.c=bq,true):false;}else return false;},function(){bn.Dispose();});}};};D.skip=function(bl,bm){var bn,bo,bp;bn=bm;for(bo=1,bp=bl;bo<=bp;bo++)if(bn.$==0)_4.FailWith("Input list too short.");else bn=bn.$1;return bn;};B.groupBy=function(bl,bm){var bn,bo,bp,bq,br,bs,bt,bu,bv;bo=new N.New$5();bp=a.Array.prototype.constructor.apply(a.Array,[]);for(bq=0,br=B.length(bm)-1;bq<=br;bq++){bs=bm[bq];bt=bl(bs);bo.ContainsKey(bt)?(bu=bo.get_Item(bt).push(bs),void 0):(bv=bp.push(bt),void 0,bo.Add(bt,[bs]));}bn=function(bw){return[bw,bo.get_Item(bw)];};(function(bw){B.mapInPlace(bn,bw);}(bp));return bp;};C.insufficient=function(){return _4.FailWith("The input sequence has an insufficient number of elements.");};C.last=function(bl){var bm,bn;bm=w.Get(bl);try{if(!bm.MoveNext())bn=C.insufficient();else{while(bm.MoveNext());bn=bm.Current();}return bn;}finally{if("Dispose"in bm)bm.Dispose();}};C.contains=function(bl,bm){var bn,bo;bn=w.Get(bm);try{bo=false;while(!bo?bn.MoveNext():false)bo=bh.Equals(bn.Current(),bl);return bo;}finally{if("Dispose"in bn)bn.Dispose();}};D.skipWhile=function(bl,bm){var bn;bn=bm;while(!(bn.$==0)?bl(D.head(bn)):false)bn=D.tail(bn);return bn;};C.nonNegative=function(){return _4.FailWith("The input must be non-negative.");};B.checkBounds=function(bl,bm){if(bm<0?true:bm>=bl.length)_4.FailWith("Index was outside the bounds of the array.");};B.checkBounds2D=function(bl,bm,bn){if(((bm<0?true:bn<0)?true:bm>=bl.length)?true:bn>=(bl.length?bl[0].length:0))throw new P.New();};B.checkRange=function(bl,bm,bn){if((bn<0?true:bm<0)?true:bl.length<bm+bn)_4.FailWith("Index was outside the bounds of the array.");};B.set=function(bl,bm,bn){B.checkBounds(bl,bm);bl[bm]=bn;};B.get=function(bl,bm){B.checkBounds(bl,bm);return bl[bm];};B.sub=function(bl,bm,bn){B.checkRange(bl,bm,bn);return bl.slice(bm,bm+bn);};B.setSub=function(bl,bm,bn,bo){var bp,bq;for(bp=0,bq=bn-1;bp<=bq;bp++)B.set(bl,bm+bp,B.get(bo,bp));};B.get2D=function(bl,bm,bn){B.checkBounds2D(bl,bm,bn);return bl[bm][bn];};B.set2D=function(bl,bm,bn,bo){B.checkBounds2D(bl,bm,bn);bl[bm][bn]=bo;};B.zeroCreate2D=function(bl,bm){var bn;bn=B.init(bl,function(){return B.create(bm,null);});bn.dims=2;return bn;};B.sub2D=function(bl,bm,bn,bo,bp){var bq,br,bs,bt,bu,bv,bw;bq=bo<0?0:bo;br=bp<0?0:bp;bs=B.zeroCreate2D(bq,br);for(bt=0,bu=bq-1;bt<=bu;bt++){for(bv=0,bw=br-1;bv<=bw;bv++)B.set2D(bs,bt,bv,B.get2D(bl,bm+bt,bn+bv));}return bs;};B.setSub2D=function(bl,bm,bn,bo,bp,bq){var br,bs,bt,bu;for(br=0,bs=bo-1;br<=bs;br++){for(bt=0,bu=bp-1;bt<=bu;bt++)B.set2D(bl,bm+br,bn+bt,B.get2D(bq,br,bt));}};B.length=function(bl){return bl.dims===2?bl.length*bl.length:bl.length;};b.checkThis=function(bl){return bh.Equals(bl,null)?_4.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bl;};B.reverse=function(bl,bm,bn){var bo;bo=B.sub(bl,bm,bn).slice().reverse();B.blit(bo,0,bl,bm,B.length(bo));};B.sum=function(bl){var bm,bn;bm=0;bn=0;for(;bn<bl.length;bn++)bm+=bl[bn];return bm;};B.sumBy=function(bl,bm){var bn,bo;bn=0;bo=0;for(;bo<bm.length;bo++)bn+=bl(bm[bo]);return bn;};B.average=function(bl){var bm,bn;return(bm=B.sum(bl),a.Number(bm))/(bn=bl.length,a.Number(bn));};B.averageBy=function(bl,bm){var bn,bo;return(bn=B.sumBy(bl,bm),a.Number(bn))/(bo=bm.length,a.Number(bo));};B.blit=function(bl,bm,bn,bo,bp){var bq,br;B.checkRange(bl,bm,bp);B.checkRange(bn,bo,bp);for(bq=0,br=bp-1;bq<=br;bq++)bn[bo+bq]=bl[bm+bq];};B.choose=function(bl,bm){var bn,bo,bp,bq;bn=[];for(bo=0,bp=bm.length-1;bo<=bp;bo++){bq=bl(bm[bo]);bq==null?null:bn.push(bq.$0);}return bn;};B.collect=function(bl,bm){var bn;bn=B.map(bl,bm);return a.Array.prototype.concat.apply([],bn);};B.concat=function(bl){var bm;bm=B.ofSeq(bl);return a.Array.prototype.concat.apply([],bm);};B.create=function(bl,bm){var bn,bo,bp;bn=new a.Array(bl);for(bo=0,bp=bl-1;bo<=bp;bo++)bn[bo]=bm;return bn;};B.exists=function(bl,bm){var bn,bo,bp,bq;bn=false;bo=0;bq=B.length(bm);while(!bn?bo<bq:false)if(bl(bm[bo]))bn=true;else bo=bo+1;return bn;};B.exists2=function(bl,bm,bn){var bo,bp,bq,br;B.checkLength(bm,bn);bo=false;bp=0;br=B.length(bm);while(!bo?bp<br:false)if(bl(bm[bp],bn[bp]))bo=true;else bp=bp+1;return bo;};B.fill=function(bl,bm,bn,bo){var bp,bq;B.checkRange(bl,bm,bn);for(bp=bm,bq=bm+bn-1;bp<=bq;bp++)bl[bp]=bo;};B.filter=function(bl,bm){var bn,bo,bp;bn=[];for(bo=0,bp=bm.length-1;bo<=bp;bo++)if(bl(bm[bo]))bn.push(bm[bo]);return bn;};B.find=function(bl,bm){var bn;bn=B.tryFind(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};B.findIndex=function(bl,bm){var bn;bn=B.tryFindIndex(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};B.fold=function(bl,bm,bn){var bo,bp,bq;bo=bm;for(bp=0,bq=bn.length-1;bp<=bq;bp++)bo=bl(bo,bn[bp]);return bo;};B.fold2=function(bl,bm,bn,bo){var bp,bq,br;B.checkLength(bn,bo);bp=bm;for(bq=0,br=bn.length-1;bq<=br;bq++)bp=bl(bp,bn[bq],bo[bq]);return bp;};B.foldBack=function(bl,bm,bn){var bo,bp,bq,br,bs;bo=bn;bq=bm.length;for(br=1,bs=bq;br<=bs;br++)bo=bl(bm[bq-br],bo);return bo;};B.foldBack2=function(bl,bm,bn,bo){var bp,bq,br,bs,bt;B.checkLength(bm,bn);br=bm.length;bq=bo;for(bs=1,bt=br;bs<=bt;bs++)bq=bl(bm[br-bs],bn[br-bs],bq);return bq;};B.forall=function(bl,bm){var bn,bo,bp,bq;bn=true;bo=0;bq=B.length(bm);while(bn?bo<bq:false)if(bl(bm[bo]))bo=bo+1;else bn=false;return bn;};B.forall2=function(bl,bm,bn){var bo,bp,bq,br;B.checkLength(bm,bn);bo=true;bp=0;br=B.length(bm);while(bo?bp<br:false)if(bl(bm[bp],bn[bp]))bp=bp+1;else bo=false;return bo;};B.init=function(bl,bm){var bn,bo,bp;bl<0?_4.FailWith("Negative size given."):null;bn=new a.Array(bl);for(bo=0,bp=bl-1;bo<=bp;bo++)bn[bo]=bm(bo);return bn;};B.iter=function(bl,bm){var bn,bo;for(bn=0,bo=bm.length-1;bn<=bo;bn++)bl(bm[bn]);};B.iter2=function(bl,bm,bn){var bo,bp;B.checkLength(bm,bn);for(bo=0,bp=bm.length-1;bo<=bp;bo++)bl(bm[bo],bn[bo]);};B.iteri=function(bl,bm){var bn,bo;for(bn=0,bo=bm.length-1;bn<=bo;bn++)bl(bn,bm[bn]);};B.iteri2=function(bl,bm,bn){var bo,bp;B.checkLength(bm,bn);for(bo=0,bp=bm.length-1;bo<=bp;bo++)bl(bo,bm[bo],bn[bo]);};B.map=function(bl,bm){var bn,bo,bp,bq;bo=(bn=bm.length,new a.Array(bn));for(bp=0,bq=bm.length-1;bp<=bq;bp++)bo[bp]=bl(bm[bp]);return bo;};B.map2=function(bl,bm,bn){var bo,bp,bq,br;B.checkLength(bm,bn);bp=(bo=bn.length,new a.Array(bo));for(bq=0,br=bn.length-1;bq<=br;bq++)bp[bq]=bl(bm[bq],bn[bq]);return bp;};B.mapi=function(bl,bm){var bn,bo,bp,bq;bo=(bn=bm.length,new a.Array(bn));for(bp=0,bq=bm.length-1;bp<=bq;bp++)bo[bp]=bl(bp,bm[bp]);return bo;};B.mapi2=function(bl,bm,bn){var bo,bp,bq,br;B.checkLength(bm,bn);bp=(bo=bm.length,new a.Array(bo));for(bq=0,br=bm.length-1;bq<=br;bq++)bp[bq]=bl(bq,bm[bq],bn[bq]);return bp;};B.max=function(bl){return B.reduce(_4.Max,bl);};B.maxBy=function(bl,bm){return B.reduce(function(bn,bo){return bh.Compare(bl(bn),bl(bo))===1?bn:bo;},bm);};B.min=function(bl){return B.reduce(_4.Min,bl);};B.minBy=function(bl,bm){return B.reduce(function(bn,bo){return bh.Compare(bl(bn),bl(bo))===-1?bn:bo;},bm);};B.ofList=function(bl){var bm,bn;bn=[];bm=bl;while(!(bm.$==0)){bn.push(D.head(bm));bm=D.tail(bm);}return bn;};B.ofSeq=function(bl){var bm,bn;if(bl instanceof a.Array)return bl.slice();else if(bl instanceof _1)return B.ofList(bl);else{bm=[];bn=w.Get(bl);try{while(bn.MoveNext())bm.push(bn.Current());return bm;}finally{if("Dispose"in bn)bn.Dispose();}}};B.partition=function(bl,bm){var bn,bo,bp,bq;bn=[];bo=[];for(bp=0,bq=bm.length-1;bp<=bq;bp++)if(bl(bm[bp]))bn.push(bm[bp]);else bo.push(bm[bp]);return[bn,bo];};B.permute=function(bl,bm){var bn,bo,bp,bq;bo=(bn=bm.length,new a.Array(bn));for(bp=0,bq=bm.length-1;bp<=bq;bp++)bo[bl(bp)]=bm[bp];return bo;};B.pick=function(bl,bm){var bn;bn=B.tryPick(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};B.reduce=function(bl,bm){var bn,bo,bp;B.nonEmpty(bm);bn=bm[0];for(bo=1,bp=bm.length-1;bo<=bp;bo++)bn=bl(bn,bm[bo]);return bn;};B.reduceBack=function(bl,bm){var bn,bo,bp,bq,br;B.nonEmpty(bm);bp=bm.length;bo=bm[bp-1];for(bq=2,br=bp;bq<=br;bq++)bo=bl(bm[bp-bq],bo);return bo;};B.scan=function(bl,bm,bn){var bo,bp,bq,br;bp=(bo=1+bn.length,new a.Array(bo));bp[0]=bm;for(bq=0,br=bn.length-1;bq<=br;bq++)bp[bq+1]=bl(bp[bq],bn[bq]);return bp;};B.scanBack=function(bl,bm,bn){var bo,bp,bq,br;bo=bm.length;bp=new a.Array(1+bo);bp[bo]=bn;for(bq=0,br=bo-1;bq<=br;bq++)bp[bo-bq-1]=bl(bm[bo-bq-1],bp[bo-bq]);return bp;};B.sort=function(bl){var bm,bn;bm=function(bo){return bo[0];};return function(bo){return B.map(bm,bo);}((bn=B.mapi(function(bo,bp){return[bp,bo];},bl),bn.sort(_4.Compare)));};B.sortBy=function(bl,bm){var bn,bo;bn=function(bp){return bp[0];};return function(bp){return B.map(bn,bp);}((bo=B.mapi(function(bp,bq){return[bq,[bl(bq),bp]];},bm),bo.sort(function(bp,bq){return _4.Compare(bp[1],bq[1]);})));};B.sortInPlace=function(bl){var bm,bn;bm=function(bo){return bo[0];};(function(bo){B.mapInPlace(bm,bo);}((bn=B.mapiInPlace(function(bo,bp){return[bp,bo];},bl),bn.sort(_4.Compare))));};B.sortInPlaceBy=function(bl,bm){var bn,bo;bn=function(bp){return bp[0];};(function(bp){B.mapInPlace(bn,bp);}((bo=B.mapiInPlace(function(bp,bq){return[bq,[bl(bq),bp]];},bm),bo.sort(function(bp,bq){return _4.Compare(bp[1],bq[1]);}))));};B.sortInPlaceWith=function(bl,bm){var bn;bn=bm.sort(bl);};B.sortWith=function(bl,bm){return bm.slice().sort(bl);};B.sortByDescending=function(bl,bm){var bn,bo;bn=function(bp){return bp[0];};return function(bp){return B.map(bn,bp);}((bo=B.mapi(function(bp,bq){return[bq,[bl(bq),bp]];},bm),bo.sort(function(bp,bq){return-_4.Compare(bp[1],bq[1]);})));};B.sortDescending=function(bl){var bm,bn;bm=function(bo){return bo[0];};return function(bo){return B.map(bm,bo);}((bn=B.mapi(function(bo,bp){return[bp,bo];},bl),bn.sort(function(bo,bp){return-_4.Compare(bo,bp);})));};B.tryFind=function(bl,bm){var bn,bo;bn=null;bo=0;while(bo<bm.length?bn==null:false){bl(bm[bo])?void(bn={$:1,$0:bm[bo]}):null;bo=bo+1;}return bn;};B.tryFindIndex=function(bl,bm){var bn,bo;bn=null;bo=0;while(bo<bm.length?bn==null:false){bl(bm[bo])?void(bn={$:1,$0:bo}):null;bo=bo+1;}return bn;};B.tryHead=function(bl){return bl.length===0?null:{$:1,$0:bl[0]};};B.tryItem=function(bl,bm){return(bm.length<=bl?true:bl<0)?null:{$:1,$0:bm[bl]};};B.tryLast=function(bl){var bm;bm=bl.length;return bm===0?null:{$:1,$0:bl[bm-1]};};B.tryPick=function(bl,bm){var bn,bo,bp;bn=null;bo=0;while(bo<bm.length?bn==null:false){bp=bl(bm[bo]);(bp!=null?bp.$==1:false)?void(bn=bp):null;bo=bo+1;}return bn;};B.unzip=function(bl){var bm,bn,bo,bp,bq;bm=[];bn=[];for(bo=0,bp=bl.length-1;bo<=bp;bo++){bq=bl[bo];bm.push(bq[0]);bn.push(bq[1]);}return[bm,bn];};B.unzip3=function(bl){var bm,bn,bo,bp,bq,br;bm=[];bn=[];bo=[];for(bp=0,bq=bl.length-1;bp<=bq;bp++){br=bl[bp];bm.push(br[0]);bn.push(br[1]);bo.push(br[2]);}return[bm,bn,bo];};B.zip=function(bl,bm){var bn,bo,bp;B.checkLength(bl,bm);bn=B.create(bl.length,null);for(bo=0,bp=bl.length-1;bo<=bp;bo++)bn[bo]=[bl[bo],bm[bo]];return bn;};B.zip3=function(bl,bm,bn){var bo,bp,bq;B.checkLength(bl,bm);B.checkLength(bm,bn);bo=B.create(bl.length,null);for(bp=0,bq=bl.length-1;bp<=bq;bp++)bo[bp]=[bl[bp],bm[bp],bn[bp]];return bo;};B.chunkBySize=function(bl,bm){return B.ofSeq(C.chunkBySize(bl,bm));};B.compareWith=function(bl,bm,bn){return C.compareWith(bl,bm,bn);};B.distinct=function(bl){return B.ofSeq(C.distinct(bl));};B.distinctBy=function(bl,bm){return B.ofSeq(C.distinctBy(bl,bm));};B.except=function(bl,bm){return B.ofSeq(C.except(bl,bm));};B.findBack=function(bl,bm){var bn;bn=B.tryFindBack(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};B.findIndexBack=function(bl,bm){var bn;bn=B.tryFindIndexBack(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};B.head=function(bl){B.nonEmpty(bl);return bl[0];};B.last=function(bl){B.nonEmpty(bl);return bl[bl.length-1];};B.map3=function(bl,bm,bn,bo){var bp,bq,br,bs;B.checkLength(bm,bn);B.checkLength(bm,bo);bq=(bp=bo.length,new a.Array(bp));for(br=0,bs=bo.length-1;br<=bs;br++)bq[br]=bl(bm[br],bn[br],bo[br]);return bq;};B.pairwise=function(bl){return B.ofSeq(C.pairwise(bl));};B.replicate=function(bl,bm){return B.create(bl,bm);};B.indexed=function(bl){return B.mapi(function(bm,bn){return[bm,bn];},bl);};B.skip=function(bl,bm){return bl<0?C.nonNegative():bl>bm.length?C.insufficient():bm.slice(bl);};B.skipWhile=function(bl,bm){var bn,bo;bo=bm.length;bn=0;while(bn<bo?bl(bm[bn]):false)bn=bn+1;return bm.slice(bn);};B.tail=function(bl){return B.skip(1,bl);};B.take=function(bl,bm){return bl<0?C.nonNegative():bl>bm.length?C.insufficient():bm.slice(0,bl);};B.takeWhile=function(bl,bm){var bn,bo;bo=bm.length;bn=0;while(bn<bo?bl(bm[bn]):false)bn=bn+1;return bm.slice(0,bn);};B.exactlyOne=function(bl){return bl.length===1?bl[0]:_4.FailWith("The input does not have precisely one element.");};B.unfold=function(bl,bm){return B.ofSeq(C.unfold(bl,bm));};B.windowed=function(bl,bm){return B.ofSeq(C.windowed(bl,bm));};B.splitAt=function(bl,bm){return[B.take(bl,bm),B.skip(bl,bm)];};B.nonEmpty=function(bl){if(bl.length===0)_4.FailWith("The input array was empty.");};B.checkLength=function(bl,bm){if(bl.length!==bm.length)_4.FailWith("The arrays have different lengths.");};E.init=function(bl,bm,bn){var bo,bp,bq,br,bs;bo=B.zeroCreate2D(bl,bm);for(bp=0,bq=bl-1;bp<=bq;bp++){for(br=0,bs=bm-1;br<=bs;br++)B.set2D(bo,bp,br,bn(bp,br));}return bo;};E.iter=function(bl,bm){var bn,bo,bp,bq,br,bs;bn=bm.length;bo=bm.length?bm[0].length:0;for(bp=0,bq=bn-1;bp<=bq;bp++){for(br=0,bs=bo-1;br<=bs;br++)bl(B.get2D(bm,bp,br));}};E.iteri=function(bl,bm){var bn,bo,bp,bq,br,bs;bn=bm.length;bo=bm.length?bm[0].length:0;for(bp=0,bq=bn-1;bp<=bq;bp++){for(br=0,bs=bo-1;br<=bs;br++)bl(bp,br,B.get2D(bm,bp,br));}};E.map=function(bl,bm){return E.init(bm.length,bm.length?bm[0].length:0,function(bn,bo){return bl(B.get2D(bm,bn,bo));});};E.mapi=function(bl,bm){return E.init(bm.length,bm.length?bm[0].length:0,function(bn,bo){return bl(bn,bo,B.get2D(bm,bn,bo));});};E.copy=function(bl){return E.init(bl.length,bl.length?bl[0].length:0,function(bm,bn){return B.get2D(bl,bm,bn);});};F=b.CancellationTokenSource=bj.Class({CancelAfter:function(bl){var bm,bn;bm=this;!this.c?(bn=this.pending,bn==null?null:a.clearTimeout(bn.$0),this.pending={$:1,$0:a.setTimeout(function(){bm.Cancel$1();},bl)}):null;},Cancel:function(bl){var bm;if(!bl)this.Cancel$1();else if(!this.c){this.c=true;bm=function(bn){bn();};(function(bn){B.iter(bm,bn);}(this.r));}},Cancel$1:function(){var bl,bm;if(!this.c){this.c=true;bm=(bl=function(bn){try{bn();return null;}catch(bo){return{$:1,$0:bo};}},function(bn){return B.choose(bl,bn);}(this.r));if(B.length(bm)>0)throw new U.New$3(bm);else null;}}},null,F);F.CreateLinkedTokenSource=function(bl,bm){return F.CreateLinkedTokenSource$1([bl,bm]);};F.CreateLinkedTokenSource$1=function(bl){var bm,bn;bm=new F.New();bn=function(bo){var bp,bq;bp=(bq=function(){return bm.Cancel$1();},t.Register(bo,function(){bq();}));};(function(bo){B.iter(bn,bo);}(bl));return bm;};F.New=bj.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;null;},F);G.IsWhiteSpace=function(bl){return a.String.fromCharCode(bl).match(new a.RegExp("\\s"))!==null;};G.Parse=function(bl){return bl.length===1?bl.charCodeAt(0):_4.FailWith("String must be exactly one character long.");};G.IsUpper=function(bl){return bl>=65?bl<=90:false;};G.IsLower=function(bl){return bl>=97?bl<=122:false;};G.IsLetterOrDigit=function(bl){return G.IsLetter(bl)?true:G.IsDigit(bl);};G.IsLetter=function(bl){return(bl>=65?bl<=90:false)?true:bl>=97?bl<=122:false;};G.IsDigit=function(bl){return bl>=48?bl<=57:false;};G.IsControl=function(bl){return(bl>=0?bl<=31:false)?true:bl>=128?bl<=159:false;};G.GetNumericValue=function(bl){return(bl>=48?bl<=57:false)?a.Number(bl)-a.Number(48):-1;};H.addListener=function(bl,bm){var bn;bn=bl.Subscribe(H.observer(bm));};H.subscribeTo=function(bl,bm){return bl.Subscribe(H.observer(bm));};H.observer=function(bl){return{OnNext:bl,OnError:function(){return null;},OnCompleted:function(){return null;}};};I.LongTime=function(bl){return(new a.Date(bl)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};I.ShortTime=function(bl){return(new a.Date(bl)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};I.LongDate=function(bl){return(new a.Date(bl)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};I.Parse=function(bl){var bm;bm=I.TryParse(bl);return(bm!=null?bm.$==1:false)?bm.$0:_4.FailWith("Failed to parse date string.");};I.TryParse=function(bl){var bm;bm=a.Date.parse(bl);return a.isNaN(bm)?null:{$:1,$0:bm};};I.AddMonths=function(bl,bm){var bn,bo,bp,bq,br,bs,bt,bu;bn=new a.Date(bl);return(bo=bn.getFullYear(),(bp=bn.getMonth()+bm,(bq=bn.getDate(),(br=bn.getHours(),(bs=bn.getMinutes(),(bt=bn.getSeconds(),(bu=bn.getMilliseconds(),new a.Date(bo,bp,bq,br,bs,bt,bu)))))))).getTime();};I.AddYears=function(bl,bm){var bn,bo,bp,bq,br,bs,bt,bu;bn=new a.Date(bl);return(bo=bn.getFullYear()+bm,(bp=bn.getMonth(),(bq=bn.getDate(),(br=bn.getHours(),(bs=bn.getMinutes(),(bt=bn.getSeconds(),(bu=bn.getMilliseconds(),new a.Date(bo,bp,bq,br,bs,bt,bu)))))))).getTime();};I.TimePortion=function(bl){var bm;bm=new a.Date(bl);return(((24*0+bm.getHours())*60+bm.getMinutes())*60+bm.getSeconds())*1000+bm.getMilliseconds();};I.DatePortion=function(bl){var bm,bn,bo,bp;bm=new a.Date(bl);return(bn=bm.getFullYear(),(bo=bm.getMonth(),(bp=bm.getDate(),new a.Date(bn,bo,bp)))).getTime();};J.InvocationList=function(bl){return bl.$Invokes||[bl];};J.RemoveAll=function(bl,bm){var bn,bo;bn=J.InvocationList(bl);B.length(J.InvocationList(bm))>1?_4.FailWith("TODO: Remove multicast delegates"):null;return bj.CreateDelegate((bo=function(bp){return!bh.Equals(bp,bm);},function(bp){return B.filter(bo,bp);}(bn)));};J.Remove=function(bl,bm){var bn,bo,bp,bq,br,bs,bt,bu;bp=J.InvocationList(bl);if(B.length(J.InvocationList(bm))>1)_4.FailWith("TODO: Remove multicast delegates");bq=[];bo=false;for(br=B.length(bp)-1,bs=0;br>=bs;br--){bt=B.get(bp,br);(!bo?bj.DelegateEqual(bt,bm):false)?void(bo=true):(bu=bq.unshift(bt),void 0);}return bj.CreateDelegate(bq);};J.DelegateTarget=function(bl){var bm;return!bl?null:"$Target"in bl?bl.$Target:"$Invokes"in bl?(bm=bl.$Invokes,(B.get(bm,B.length(bm)-1))[1]):null;};K.getHashCode=function(bl,bm){return bl.CGetHashCode(bm);};K.equals=function(bl){return function(bm,bn){return bl.CEquals(bm,bn);};};K.alreadyAdded=function(){return _4.FailWith("An item with the same key has already been added.");};K.notPresent=function(){return _4.FailWith("The given key was not present in the dictionary.");};L=e.KeyCollection=bj.Class({GetEnumerator$1:function(){var bl;return w.Get((bl=function(bm){return bm.K;},function(bm){return C.map(bl,bm);}(this.d)));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},null,L);L.New=bj.Ctor(function(bl){this.d=bl;null;},L);M=e.ValueCollection=bj.Class({GetEnumerator$1:function(){var bl;return w.Get((bl=function(bm){return bm.V;},function(bm){return C.map(bl,bm);}(this.d)));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},null,M);M.New=bj.Ctor(function(bl){this.d=bl;null;},M);N=e.Dictionary=bj.Class({remove:function(bl){var bm,bn,bo,bp,bq;bm=this;bn=this.hash(bl);bo=this.data[bn];return bo?(bp=(bq=function(br){return!bm.equals.apply(null,[(_4.KeyValue(br))[0],bl]);},function(br){return B.filter(bq,br);}(bo)),B.length(bp)<bo.length?(this.count=this.count-1,this.data[bn]=bp,true):false):false;},add:function(bl,bm){var bn,bo,bp,bq,br;bn=this;bo=this.hash(bl);bp=this.data[bo];bp?((bq=function(bs){return bn.equals.apply(null,[(_4.KeyValue(bs))[0],bl]);},function(bs){return B.exists(bq,bs);}(bp))?K.alreadyAdded():null,this.count=this.count+1,(br=bp.push({K:bl,V:bm}),void 0)):(this.count=this.count+1,void(this.data[bo]=new a.Array({K:bl,V:bm})));},set:function(bl,bm){var bn,bo,bp,bq,br,bs;bn=this;bo=this.hash(bl);bp=this.data[bo];bp?(bq=(br=function(bt){return bn.equals.apply(null,[(_4.KeyValue(bt))[0],bl]);},function(bt){return B.tryFindIndex(br,bt);}(bp)),bq==null?(this.count=this.count+1,(bs=bp.push({K:bl,V:bm}),void 0)):void(bp[bq.$0]={K:bl,V:bm})):(this.count=this.count+1,void(this.data[bo]=new a.Array({K:bl,V:bm})));},get:function(bl){var bm,bn,bo,bp;bm=this;bn=this.hash(bl);bo=this.data[bn];return bo?(bp=function(bq){var br;br=_4.KeyValue(bq);return bm.equals.apply(null,[br[0],bl])?{$:1,$0:br[1]}:null;},function(bq){return B.pick(bp,bq);}(bo)):K.notPresent();},get_Keys:function(){return new L.New(this);},get_Values:function(){return new M.New(this);},TryGetValue:function(bl,bm){var bn,bo,bp,bq,br;bn=this;bo=this.hash(bl);bp=this.data[bo];return bp?(bq=(br=function(bs){var bt;bt=_4.KeyValue(bs);return bn.equals.apply(null,[bt[0],bl])?{$:1,$0:bt[1]}:null;},function(bs){return B.tryPick(br,bs);}(bp)),(bq!=null?bq.$==1:false)?(bm.set(bq.$0),true):false):false;},Remove:function(bl){return this.remove(bl);},GetEnumerator$1:function(){return w.Get0(this);},set_Item:function(bl,bm){this.set(bl,bm);},get_Item:function(bl){return this.get(bl);},ContainsKey:function(bl){var bm,bn,bo,bp;bm=this;bn=this.hash(bl);bo=this.data[bn];return bo?(bp=function(bq){return bm.equals.apply(null,[(_4.KeyValue(bq))[0],bl]);},function(bq){return B.exists(bp,bq);}(bo)):false;},Clear:function(){this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;},Add:function(bl,bm){this.add(bl,bm);},GetEnumerator:function(){return w.Get0(this);},GetEnumerator0:function(){var bl;bl=d.GetFieldValues(this.data);return w.Get0(B.concat(bl));}},null,N);N.New=bj.Ctor(function(bl,bm){N.New$6.call(this,bl,K.equals(bm),function(bn){return K.getHashCode(bm,bn);});},N);N.New$1=bj.Ctor(function(bl){N.New$6.call(this,bl,bh.Equals,bh.Hash);},N);N.New$2=bj.Ctor(function(bl,bm){N.New$3.call(this,bm);},N);N.New$3=bj.Ctor(function(bl){N.New$6.call(this,[],K.equals(bl),function(bm){return K.getHashCode(bl,bm);});},N);N.New$4=bj.Ctor(function(bl){N.New$5.call(this);},N);N.New$5=bj.Ctor(function(){N.New$6.call(this,[],bh.Equals,bh.Hash);},N);N.New$6=bj.Ctor(function(bl,bm,bn){var bo,bp;this.equals=bm;this.hash=bn;this.count=0;this.data=[];bo=w.Get(bl);try{while(bo.MoveNext()){bp=bo.Current();this.set(bp.K,bp.V);}}finally{if("Dispose"in bo)bo.Dispose();}},N);O=b.MatchFailureException=bj.Class({},a.Error,O);O.New=bj.Ctor(function(bl,bm,bn){this.message=bl+" at "+a.String(bm)+":"+a.String(bn);null;},O);P=b.IndexOutOfRangeException=bj.Class({},a.Error,P);P.New=bj.Ctor(function(){P.New$1.call(this,"Index was outside the bounds of the array.");},P);P.New$1=bj.Ctor(function(bl){this.message=bl;null;},P);Q=b.OperationCanceledException=bj.Class({},a.Error,Q);Q.New=bj.Ctor(function(bl){Q.New$1.call(this,"The operation was canceled.",null,bl);},Q);Q.New$1=bj.Ctor(function(bl,bm,bn){this.message=bl;this.ct=bn;null;},Q);R=b.ArgumentException=bj.Class({},a.Error,R);R.New=bj.Ctor(function(bl,bm){R.New$2.call(this,bm+"\nParameter name: "+bl);},R);R.New$1=bj.Ctor(function(){R.New$2.call(this,"Value does not fall within the expected range.");},R);R.New$2=bj.Ctor(function(bl){this.message=bl;null;},R);S=b.ArgumentOutOfRangeException=bj.Class({},a.Error,S);S.New=bj.Ctor(function(){S.New$1.call(this,"Specified argument was out of the range of valid values.");},S);S.New$1=bj.Ctor(function(bl){this.message=bl;null;},S);T=b.InvalidOperationException=bj.Class({},a.Error,T);T.New=bj.Ctor(function(){T.New$1.call(this,"Operation is not valid due to the current state of the object.");},T);T.New$1=bj.Ctor(function(bl){this.message=bl;null;},T);U=b.AggregateException=bj.Class({},a.Error,U);U.New=bj.Ctor(function(bl,bm){U.New$4.call(this,bl,[bm]);},U);U.New$1=bj.Ctor(function(bl,bm){U.New$4.call(this,bl,B.ofSeq(bm));},U);U.New$2=bj.Ctor(function(bl){U.New$4.call(this,"One or more errors occurred.",B.ofSeq(bl));},U);U.New$3=bj.Ctor(function(bl){U.New$4.call(this,"One or more errors occurred.",bl);},U);U.New$4=bj.Ctor(function(bl,bm){this.message=bl;this.innerExceptions=bm;null;},U);V=b.TimeoutException=bj.Class({},a.Error,V);V.New=bj.Ctor(function(){V.New$1.call(this,"The operation has timed out.");},V);V.New$1=bj.Ctor(function(bl){this.message=bl;null;},V);W=b.FormatException=bj.Class({},a.Error,W);W.New=bj.Ctor(function(){W.New$1.call(this,"One of the identified items was in an invalid format.");},W);W.New$1=bj.Ctor(function(bl){this.message=bl;null;},W);B.create2D=function(bl){var bm;bm=B.ofSeq(C.map(B.ofSeq,bl));bm.dims=2;return bm;};X.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bl){var bm,bn;bm=a.Math.random()*16|0;bn=bl=="x"?bm:bm&3|8;return bn.toString(16);});};Y.concat=function(bl){var bm,bn;bm=[];for(var bo in bl)bm.push.apply(bm,bl[bo]);return bm;};Z=e.HashSet=bj.Class({add:function(bl){var bm,bn,bo;bm=this.hash(bl);bn=this.data[bm];return bn==null?(this.data[bm]=[bl],this.count=this.count+1,true):this.arrContains(bl,bn)?false:(bo=bn.push(bl),void 0,this.count=this.count+1,true);},arrRemove:function(bl,bm){var bn,bo,bp,bq,br;bn=true;bo=0;bq=bm.length;while(bn?bo<bq:false)if(this.equals.apply(null,[bm[bo],bl])){br=bm.splice.apply(bm,[bo,1].concat([]));bn=false;}else bo=bo+1;return!bn;},arrContains:function(bl,bm){var bn,bo,bp,bq;bn=true;bo=0;bq=bm.length;while(bn?bo<bq:false)if(this.equals.apply(null,[bm[bo],bl]))bn=false;else bo=bo+1;return!bn;},UnionWith:function(bl){var bm,bn;bm=w.Get(bl);try{while(bm.MoveNext()){bn=this.Add(bm.Current());}}finally{if("Dispose"in bm)bm.Dispose();}},SymmetricExceptWith:function(bl){var bm,bn,bo,bp;bm=w.Get(bl);try{while(bm.MoveNext()){bn=bm.Current();this.Contains(bn)?(bo=this.Remove(bn),void 0):(bp=this.Add(bn),void 0);}}finally{if("Dispose"in bm)bm.Dispose();}},SetEquals:function(bl){var bm;bm=new Z.New$4(bl,this.equals,this.hash);return this.get_Count()===bm.get_Count()?this.IsSupersetOf(bm):false;},RemoveWhere:function(bl){var bm,bn,bo,bp,bq;bn=Y.concat(this.data);bm=0;for(bo=0,bp=bn.length-1;bo<=bp;bo++){bq=bn[bo];bl(bq)?this.Remove(bq)?void(bm=bm+1):null:null;}return bm;},Remove:function(bl){var bm;bm=this.data[this.hash(bl)];return bm==null?false:this.arrRemove(bl,bm)?(this.count=this.count-1,true):false;},Overlaps:function(bl){var bm,bn;bm=this;bn=function(bo){return bm.Contains(bo);};return function(bo){return C.exists(bn,bo);}(bl);},IsSupersetOf:function(bl){var bm,bn;bm=this;bn=function(bo){return bm.Contains(bo);};return function(bo){return C.forall(bn,bo);}(bl);},IsSubsetOf:function(bl){var bm,bn;bm=new Z.New$4(bl,this.equals,this.hash);bn=function(bo){return bm.Contains(bo);};return function(bo){return B.forall(bn,bo);}(Y.concat(this.data));},IsProperSupersetOf:function(bl){var bm;bm=B.ofSeq(bl);return this.count>B.length(bm)?this.IsSupersetOf(bm):false;},IsProperSubsetOf:function(bl){var bm;bm=B.ofSeq(bl);return this.count<B.length(bm)?this.IsSubsetOf(bm):false;},IntersectWith:function(bl){var bm,bn,bo,bp,bq,br;bm=new Z.New$4(bl,this.equals,this.hash);bn=Y.concat(this.data);for(bo=0,bp=bn.length-1;bo<=bp;bo++){bq=bn[bo];!bm.Contains(bq)?(br=this.Remove(bq),void 0):null;}},ExceptWith:function(bl){var bm,bn;bm=w.Get(bl);try{while(bm.MoveNext()){bn=this.Remove(bm.Current());}}finally{if("Dispose"in bm)bm.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bl){var bm,bn,bo,bp;bm=0;bn=Y.concat(this.data);for(bo=0,bp=bn.length-1;bo<=bp;bo++)B.set(bl,bo,bn[bo]);},Contains:function(bl){var bm;bm=this.data[this.hash(bl)];return bm==null?false:this.arrContains(bl,bm);},Clear:function(){this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;},Add:function(bl){return this.add(bl);},GetEnumerator:function(){return w.Get(Y.concat(this.data));},GetEnumerator0:function(){return w.Get(Y.concat(this.data));}},null,Z);Z.New=bj.Ctor(function(bl,bm){Z.New$4.call(this,bl,K.equals(bm),function(bn){return K.getHashCode(bm,bn);});},Z);Z.New$1=bj.Ctor(function(bl){Z.New$4.call(this,[],K.equals(bl),function(bm){return K.getHashCode(bl,bm);});},Z);Z.New$2=bj.Ctor(function(bl){Z.New$4.call(this,bl,bh.Equals,bh.Hash);},Z);Z.New$3=bj.Ctor(function(){Z.New$4.call(this,[],bh.Equals,bh.Hash);},Z);Z.New$4=bj.Ctor(function(bl,bm,bn){var bo,bp;this.equals=bm;this.hash=bn;this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;bo=w.Get(bl);try{while(bo.MoveNext()){bp=this.add(bo.Current());}}finally{if("Dispose"in bo)bo.Dispose();}},Z);_0.Force=function(bl){return bl.f();};_0.CreateFromValue=function(bl){return{c:true,v:bl,f:_0.cachedLazy};};_0.Create=function(bl){return{c:false,v:bl,f:_0.forceLazy};};_0.forceLazy=function(){var bl;bl=this.v();this.c=true;this.v=bl;this.f=_0.cachedLazy;return bl;};_0.cachedLazy=function(){return this.v;};_1=D.T=bj.Class({GetSlice:function(bl,bm){var bn,bo,bp;return(bl!=null?bl.$==1:false)?(bm!=null?bm.$==1:false)?(bn=bl.$0,D.ofSeq((bo=bm.$0-bn+1,function(bq){return C.take(bo,bq);}(D.skip(bn,this))))):D.skip(bl.$0,this):(bm!=null?bm.$==1:false)?D.ofSeq((bp=bm.$0+1,function(bq){return C.take(bp,bq);}(this))):this;},get_Item:function(bl){return C.nth(bl,this);},get_Length:function(){return D.length(this);},GetEnumerator:function(){return new x.New(this,null,function(bl){var bm;bm=bl.s;return bm.$==0?false:(bl.c=bm.$0,bl.s=bm.$1,true);},void 0);},GetEnumerator0:function(){return w.Get(this);}},null,_1);D.append=function(bl,bm){var bn,bo,bp,bq,br;if(bl.$==0)return bm;else{br=new _1({$:0});bn=br;bo=bl;bp=true;while(bp){D.setValue(bn,bo.$0);bo=bo.$1;bo.$==0?void(bp=false):void(bn=D.setTail(bn,new _1({$:0})));}bq=D.setTail(bn,bm);return br;}};D.choose=function(bl,bm){return D.ofSeq(C.choose(bl,bm));};D.collect=function(bl,bm){return D.ofSeq(C.collect(bl,bm));};D.concat=function(bl){return D.ofSeq(C.concat(bl));};D.exists=function(bl,bm){var bn,bo;bn=false;bo=bm;while(!bn?bo.$==1:false){bn=bl(bo.$0);bo=bo.$1;}return bn;};D.exists2=function(bl,bm,bn){var bo,bp,bq;bo=false;bp=bm;bq=bn;while((!bo?bp.$==1:false)?bq.$==1:false){bo=bl(bp.$0,bq.$0);bp=bp.$1;bq=bq.$1;}(!bo?bp.$==1?true:bq.$==1:false)?D.badLengths():null;return bo;};D.filter=function(bl,bm){return D.ofSeq(C.filter(bl,bm));};D.fold2=function(bl,bm,bn,bo){return B.fold2(bl,bm,B.ofList(bn),B.ofList(bo));};D.foldBack=function(bl,bm,bn){return B.foldBack(bl,B.ofList(bm),bn);};D.foldBack2=function(bl,bm,bn,bo){return B.foldBack2(bl,B.ofList(bm),B.ofList(bn),bo);};D.forAll=function(bl,bm){var bn,bo;bn=true;bo=bm;while(bn?bo.$==1:false){bn=bl(bo.$0);bo=bo.$1;}return bn;};D.forall2=function(bl,bm,bn){var bo,bp,bq;bo=true;bp=bm;bq=bn;while((bo?bp.$==1:false)?bq.$==1:false){bo=bl(bp.$0,bq.$0);bp=bp.$1;bq=bq.$1;}(bo?bp.$==1?true:bq.$==1:false)?D.badLengths():null;return bo;};D.head=function(bl){return bl.$==1?bl.$0:D.listEmpty();};D.init=function(bl,bm){return D.ofArray(B.init(bl,bm));};D.iter=function(bl,bm){var bn;bn=bm;while(bn.$==1){bl(D.head(bn));bn=D.tail(bn);}};D.iter2=function(bl,bm,bn){var bo,bp;bo=bm;bp=bn;while(bo.$==1){bp.$==0?D.badLengths():null;bl(D.head(bo),D.head(bp));bo=D.tail(bo);bp=D.tail(bp);}bp.$==1?D.badLengths():null;};D.iteri=function(bl,bm){var bn,bo;bn=bm;bo=0;while(bn.$==1){bl(bo,D.head(bn));bn=D.tail(bn);bo=bo+1;}};D.iteri2=function(bl,bm,bn){var bo,bp,bq;bo=bm;bp=bn;bq=0;while(bo.$==1){bp.$==0?D.badLengths():null;bl(bq,D.head(bo),D.head(bp));bo=D.tail(bo);bp=D.tail(bp);bq=bq+1;}bp.$==1?D.badLengths():null;};D.length=function(bl){var bm,bn;bm=bl;bn=0;while(bm.$==1){bm=D.tail(bm);bn=bn+1;}return bn;};D.map=function(bl,bm){var bn,bo,bp;bp=new _1({$:0});bn=bp;bo=bm;while(bo.$==1){D.setValue(bn,bl(bo.$0));bn=D.setTail(bn,new _1({$:0}));bo=bo.$1;}return bp;};D.map2=function(bl,bm,bn){var bo,bp,bq,br;br=new _1({$:0});bo=br;bp=bm;bq=bn;while(bp.$==1?bq.$==1:false){D.setValue(bo,bl(bp.$0,bq.$0));bo=D.setTail(bo,new _1({$:0}));bp=bp.$1;bq=bq.$1;}(bp.$==1?true:bq.$==1)?D.badLengths():null;return br;};D.map3=function(bl,bm,bn,bo){var bp,bq,br,bs,bt;bt=new _1({$:0});bp=bt;bq=bm;br=bn;bs=bo;while((bq.$==1?br.$==1:false)?bs.$==1:false){D.setValue(bp,bl(bq.$0,br.$0,bs.$0));bp=D.setTail(bp,new _1({$:0}));bq=bq.$1;br=br.$1;bs=bs.$1;}((bq.$==1?true:br.$==1)?true:bs.$==1)?D.badLengths():null;return bt;};D.mapi=function(bl,bm){var bn,bo,bp,bq;bq=new _1({$:0});bn=bq;bo=bm;bp=0;while(bo.$==1){D.setValue(bn,bl(bp,bo.$0));bn=D.setTail(bn,new _1({$:0}));bo=bo.$1;bp=bp+1;}return bq;};D.mapi2=function(bl,bm,bn){var bo,bp,bq,br,bs;bs=new _1({$:0});bo=bs;bp=bm;bq=bn;br=0;while(bp.$==1?bq.$==1:false){D.setValue(bo,bl(br,bp.$0,bq.$0));bo=D.setTail(bo,new _1({$:0}));bp=bp.$1;bq=bq.$1;br=br+1;}(bp.$==1?true:bq.$==1)?D.badLengths():null;return bs;};D.max=function(bl){return C.reduce(_4.Max,bl);};D.maxBy=function(bl,bm){return C.reduce(function(bn,bo){return bh.Compare(bl(bn),bl(bo))===1?bn:bo;},bm);};D.min=function(bl){return C.reduce(_4.Min,bl);};D.minBy=function(bl,bm){return C.reduce(function(bn,bo){return bh.Compare(bl(bn),bl(bo))===-1?bn:bo;},bm);};D.ofArray=function(bl){var bm,bn,bo;bm=new _1({$:0});for(bn=B.length(bl)-1,bo=0;bn>=bo;bn--)bm=new _1({$:1,$0:B.get(bl,bn),$1:bm});return bm;};D.ofSeq=function(bl){var bm,bn,bo;if(bl instanceof _1)return bl;else if(bl instanceof a.Array)return D.ofArray(bl);else{bn=new _1({$:0});bm=bn;bo=w.Get(bl);try{while(bo.MoveNext()){D.setValue(bm,bo.Current());bm=D.setTail(bm,new _1({$:0}));}bm.$=0;return bn;}finally{if("Dispose"in bo)bo.Dispose();}}};D.partition=function(bl,bm){var bn;bn=B.partition(bl,B.ofList(bm));return[D.ofArray(bn[0]),D.ofArray(bn[1])];};D.permute=function(bl,bm){return D.ofArray(B.permute(bl,B.ofList(bm)));};D.reduceBack=function(bl,bm){return B.reduceBack(bl,B.ofList(bm));};D.replicate=function(bl,bm){return D.ofArray(B.create(bl,bm));};D.rev=function(bl){var bm,bn;bm=new _1({$:0});bn=bl;while(bn.$==1){bm=new _1({$:1,$0:bn.$0,$1:bm});bn=bn.$1;}return bm;};D.scan=function(bl,bm,bn){return D.ofSeq(C.scan(bl,bm,bn));};D.scanBack=function(bl,bm,bn){return D.ofArray(B.scanBack(bl,B.ofList(bm),bn));};D.sort=function(bl){var bm;bm=B.ofList(bl);B.sortInPlace(bm);return D.ofArray(bm);};D.sortBy=function(bl,bm){return D.sortWith(function(bn,bo){return _4.Compare(bl(bn),bl(bo));},bm);};D.sortByDescending=function(bl,bm){return D.sortWith(function(bn,bo){return-_4.Compare(bl(bn),bl(bo));},bm);};D.sortDescending=function(bl){var bm;bm=B.ofList(bl);B.sortInPlaceByDescending(a.id,bm);return D.ofArray(bm);};D.sortWith=function(bl,bm){var bn;bn=B.ofList(bm);B.sortInPlaceWith(bl,bn);return D.ofArray(bn);};D.tail=function(bl){return bl.$==1?bl.$1:D.listEmpty();};D.unzip=function(bl){var bm,bn,bo,bp;bm=[];bn=[];bo=w.Get(bl);try{while(bo.MoveNext()){bp=bo.Current();bm.push(bp[0]);bn.push(bp[1]);}}finally{if("Dispose"in bo)bo.Dispose();}return[D.ofArray(bm.slice(0)),D.ofArray(bn.slice(0))];};D.unzip3=function(bl){var bm,bn,bo,bp,bq;bm=[];bn=[];bo=[];bp=w.Get(bl);try{while(bp.MoveNext()){bq=bp.Current();bm.push(bq[0]);bn.push(bq[1]);bo.push(bq[2]);}}finally{if("Dispose"in bp)bp.Dispose();}return[D.ofArray(bm.slice(0)),D.ofArray(bn.slice(0)),D.ofArray(bo.slice(0))];};D.zip=function(bl,bm){return D.map2(function(bn,bo){return[bn,bo];},bl,bm);};D.zip3=function(bl,bm,bn){return D.map3(function(bo,bp,bq){return[bo,bp,bq];},bl,bm,bn);};D.chunkBySize=function(bl,bm){var bn;bn=D.ofSeq(C.chunkBySize(bl,bm));return D.map(D.ofArray,bn);};D.compareWith=function(bl,bm,bn){return C.compareWith(bl,bm,bn);};D.countBy=function(bl,bm){return D.ofArray(B.countBy(bl,B.ofList(bm)));};D.distinct=function(bl){return D.ofSeq(C.distinct(bl));};D.distinctBy=function(bl,bm){return D.ofSeq(C.distinctBy(bl,bm));};D.splitInto=function(bl,bm){var bn;bn=D.ofArray(B.splitInto(bl,B.ofList(bm)));return D.map(D.ofArray,bn);};D.except=function(bl,bm){return D.ofSeq(C.except(bl,bm));};D.tryFindBack=function(bl,bm){return B.tryFindBack(bl,B.ofList(bm));};D.findBack=function(bl,bm){var bn;bn=D.tryFindBack(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};D.findIndexBack=function(bl,bm){var bn;bn=B.tryFindIndexBack(bl,B.ofList(bm));return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};D.groupBy=function(bl,bm){var bn,bo;bn=B.groupBy(bl,B.ofList(bm));bo=function(bp,bq){return[bp,D.ofArray(bq)];};(function(bp){B.mapInPlace(function(bq){return bo(bq[0],bq[1]);},bp);}(bn));return D.ofArray(bn);};D.last=function(bl){var bm,bn;bl.$==0?D.listEmpty():null;bm=bl;bn=bm.$1;while(bn.$==1){bm=bn;bn=bm.$1;}return bm.$0;};D.contains=function(bl,bm){var bn,bo;bn=false;bo=bm;while(!bn?bo.$==1:false){bn=bh.Equals(bl,bo.$0);bo=bo.$1;}return bn;};D.mapFold=function(bl,bm,bn){var bo;bo=B.mapFold(bl,bm,B.ofList(bn));return[D.ofArray(bo[0]),bo[1]];};D.mapFoldBack=function(bl,bm,bn){var bo;bo=B.mapFoldBack(bl,B.ofList(bm),bn);return[D.ofArray(bo[0]),bo[1]];};D.pairwise=function(bl){return D.ofSeq(C.pairwise(bl));};D.indexed=function(bl){return D.mapi(function(bm,bn){return[bm,bn];},bl);};D.tryHead=function(bl){return bl.$==0?null:{$:1,$0:bl.$0};};D.exactlyOne=function(bl){var bm;return(bl.$==1?bl.$1.$==0?(bm=bl.$0,true):false:false)?bm:_4.FailWith("The input does not have precisely one element.");};D.unfold=function(bl,bm){return D.ofSeq(C.unfold(bl,bm));};D.windowed=function(bl,bm){var bn;return D.ofSeq((bn=C.windowed(bl,bm),C.map(D.ofArray,bn)));};D.splitAt=function(bl,bm){return[D.ofSeq(C.take(bl,bm)),D.skip(bl,bm)];};D.setTail=function(bl,bm){bl.$1=bm;return bm;};D.setValue=function(bl,bm){bl.$=1;bl.$0=bm;};D.listEmpty=function(){return _4.FailWith("The input list was empty.");};D.badLengths=function(){return _4.FailWith("The lists have different lengths.");};_2.getOrValue=function(bl,bm){return bl==null?bm:bl;};_2.get=function(bl){return bl==null?_4.FailWith("Nullable object must have a value."):bl;};_3.decr=function(bl){bl[0]--;};_3.incr=function(bl){bl[0]++;};_4.range=function(bl,bm){var bn;bn=1+bm-bl;return bn<=0?[]:C.init(bn,function(bo){return bo+bl;});};_4.step=function(bl,bm,bn){var bo,bp;bo=_4.Sign(bm);bp=function(bq){return bo*(bn-bq)>=0;};return function(bq){return C.takeWhile(bp,bq);}(C.initInfinite(function(bq){return bl+bq*bm;}));};_4.KeyValue=function(bl){return[bl.K,bl.V];};_4.Using=function(bl,bm){try{return bm(bl);}finally{bl.Dispose();}};_4.Truncate=function(bl){return bl<0?a.Math.ceil(bl):a.Math.floor(bl);};_4.Sign=function(bl){return bl===0?0:bl<0?-1:1;};_4.Pown=function(bl,bm){function bn(bo){var bp;return bo===1?bl:bo%2===0?(bp=bn(bo/2>>0),bp*bp):bl*bn(bo-1);}return bn(bm);};_4.Min=function(bl,bm){return bh.Compare(bl,bm)===-1?bl:bm;};_4.Max=function(bl,bm){return bh.Compare(bl,bm)===1?bl:bm;};_4.InvalidArg=function(bl,bm){throw new R.New(bl,bm);};_4.InvalidOp=function(bl){throw new T.New$1(bl);};_4.FailWith=function(bl){throw a.Error(bl);};_4.DefaultArg=function(bl,bm){return bl==null?bm:bl.$0;};_4.Compare=function(bl,bm){return bh.Compare(bl,bm);};_5.string=function(bl,bm,bn){return bm==null?(bn!=null?bn.$==1:false)?bl.slice(0,bn.$0+1):"":bn==null?bl.slice(bm.$0):bl.slice(bm.$0,bn.$0+1);};_5.array=function(bl,bm,bn){return bm==null?(bn!=null?bn.$==1:false)?bl.slice(0,bn.$0+1):[]:bn==null?bl.slice(bm.$0):bl.slice(bm.$0,bn.$0+1);};_5.setArray=function(bl,bm,bn,bo){var bp,bq;bp=(bm!=null?bm.$==1:false)?bm.$0:0;bq=(bn!=null?bn.$==1:false)?bn.$0:bl.length-1;B.setSub(bl,bp,bq-bp+1,bo);};_5.array2D=function(bl,bm,bn,bo,bp){var bq,br,bs,bt;bq=(bm!=null?bm.$==1:false)?bm.$0:0;br=(bo!=null?bo.$==1:false)?bo.$0:0;bs=(bn!=null?bn.$==1:false)?bn.$0:bl.length-1;bt=(bp!=null?bp.$==1:false)?bp.$0:(bl.length?bl[0].length:0)-1;return B.sub2D(bl,bq,br,bs-bq+1,bt-br+1);};_5.array2Dfix1=function(bl,bm,bn,bo){var bp,bq,br,bs,bt,bu;bp=(bn!=null?bn.$==1:false)?bn.$0:0;bq=(bo!=null?bo.$==1:false)?bo.$0:(bl.length?bl[0].length:0)-1;br=bq-bp+1;bs=new a.Array(br);for(bt=0,bu=br-1;bt<=bu;bt++)B.set(bs,bt,B.get2D(bl,bm,bp+bt));return bs;};_5.array2Dfix2=function(bl,bm,bn,bo){var bp,bq,br,bs,bt,bu;bp=(bm!=null?bm.$==1:false)?bm.$0:0;bq=(bn!=null?bn.$==1:false)?bn.$0:bl.length-1;br=bq-bp+1;bs=new a.Array(br);for(bt=0,bu=br-1;bt<=bu;bt++)B.set(bs,bt,B.get2D(bl,bp+bt,bo));return bs;};_5.setArray2Dfix1=function(bl,bm,bn,bo,bp){var bq,br,bs,bt;bq=(bn!=null?bn.$==1:false)?bn.$0:0;br=(bo!=null?bo.$==1:false)?bo.$0:(bl.length?bl[0].length:0)-1;for(bs=0,bt=br-bq+1-1;bs<=bt;bs++)B.set2D(bl,bm,bq+bs,B.get(bp,bs));};_5.setArray2Dfix2=function(bl,bm,bn,bo,bp){var bq,br,bs,bt;bq=(bm!=null?bm.$==1:false)?bm.$0:0;br=(bn!=null?bn.$==1:false)?bn.$0:bl.length-1;for(bs=0,bt=br-bq+1-1;bs<=bt;bs++)B.set2D(bl,bq+bs,bo,B.get(bp,bs));};_5.setArray2D=function(bl,bm,bn,bo,bp,bq){var br,bs,bt,bu;br=(bm!=null?bm.$==1:false)?bm.$0:0;bs=(bo!=null?bo.$==1:false)?bo.$0:0;bt=(bn!=null?bn.$==1:false)?bn.$0:bl.length-1;bu=(bp!=null?bp.$==1:false)?bp.$0:(bl.length?bl[0].length:0)-1;B.setSub2D(bl,br,bs,bt-br+1,bu-bs+1,bq);};_6.fold=function(bl,bm,bn){return bn==null?bm:bl(bm,bn.$0);};_6.foldBack=function(bl,bm,bn){return bm==null?bn:bl(bm.$0,bn);};_6.toArray=function(bl){return bl==null?[]:[bl.$0];};_6.toList=function(bl){return bl==null?new _1({$:0}):D.ofArray([bl.$0]);};_6.ofObj=function(bl){return bl==null?null:{$:1,$0:bl};};_6.toObj=function(bl){return bl==null?null:bl.$0;};_6.ofNullable=function(bl){return bl==null?null:{$:1,$0:_2.get(bl)};};_6.toNullable=function(bl){return(bl!=null?bl.$==1:false)?bl.$0:null;};_6.filter=function(bl,bm){var bn;return(bm!=null?bm.$==1:false)?(bn=bm.$0,bl(bn)?{$:1,$0:bn}:null):null;};_7.CopyTo=function(bl,bm,bn){B.blit(bl,0,bm,bn,B.length(bl));};_7.Contains=function(bl,bm){return C.exists(function(bn){return bh.Equals(bm,bn);},bl);};_7.Clear=function(bl){bl.splice(0,B.length(bl));};_8=b.Random=bj.Class({NextBytes:function(bl){var bm,bn;for(bm=0,bn=B.length(bl)-1;bm<=bn;bm++)B.set(bl,bm,a.Math.floor(a.Math.random()*256));},Next:function(bl,bm){return bl>bm?_4.FailWith("'minValue' cannot be greater than maxValue."):bl+a.Math.floor(a.Math.random()*(bm-bl));},Next$1:function(bl){return bl<0?_4.FailWith("'maxValue' must be greater than zero."):a.Math.floor(a.Math.random()*bl);},Next$2:function(){return a.Math.floor(a.Math.random()*2147483648);}},null,_8);_8.New=bj.Ctor(function(){},_8);ba.New=function(bl){return{"0":bl};};C.enumFinally=function(bl,bm){return{GetEnumerator:function(){var bn;try{bn=w.Get(bl);}catch(bo){bm();throw bo;}return new x.New(null,null,function(bp){return bn.MoveNext()?(bp.c=bn.Current(),true):false;},function(){bn.Dispose();bm();});}};};C.enumUsing=function(bl,bm){return{GetEnumerator:function(){var bn;try{bn=w.Get(bm(bl));}catch(bo){bl.Dispose();throw bo;}return new x.New(null,null,function(bp){return bn.MoveNext()?(bp.c=bn.Current(),true):false;},function(){bn.Dispose();bl.Dispose();});}};};C.enumWhile=function(bl,bm){return{GetEnumerator:function(){return new x.New(null,null,function(bn){var bo;while(true){bo=bn.s;if(bh.Equals(bo,null)){if(bl()){bn.s=w.Get(bm);bn=bn;}else return false;}else{if(bo.MoveNext()){bn.c=bo.Current();return true;}else{bo.Dispose();bn.s=null;bn=bn;}}}},function(bn){var bo;bo=bn.s;!bh.Equals(bo,null)?bo.Dispose():null;});}};};bb.createEvent=function(bl,bm,bn){return{Subscribe:function(bo){var bp;bp=bn(bj.Curried2(function(bq,br){return bo.OnNext(br);}));bl(bp);return{Dispose:function(){return bm(bp);}};},RemoveHandler:bm,AddHandler:bl};};C.append=function(bl,bm){return{GetEnumerator:function(){var bn,bo;bn=w.Get(bl);bo=[true];return new x.New(bn,null,function(bp){var bq;return bp.s.MoveNext()?(bp.c=bp.s.Current(),true):(bq=bp.s,!bh.Equals(bq,null)?bq.Dispose():null,bp.s=null,bo[0]?(bo[0]=false,bp.s=w.Get(bm),bp.s.MoveNext()?(bp.c=bp.s.Current(),true):(bp.s.Dispose(),bp.s=null,false)):false);},function(bp){var bq;bq=bp.s;!bh.Equals(bq,null)?bq.Dispose():null;});}};};C.average=function(bl){var bm,bn;bm=C.fold(function(bo,bp){return(function(bq){var br,bs;br=bq[0];bs=bq[1];return function(bt){return[br+1,bs+bt];};}(bo))(bp);},[0,0],bl);bn=bm[0];return bn===0?_4.InvalidArg("source","The input sequence was empty."):bm[1]/bn;};C.averageBy=function(bl,bm){var bn,bo;bn=C.fold(function(bp,bq){return(function(br){var bs,bt;bs=br[0];bt=br[1];return function(bu){return[bs+1,bt+bl(bu)];};}(bp))(bq);},[0,0],bm);bo=bn[0];return bo===0?_4.InvalidArg("source","The input sequence was empty."):bn[1]/bo;};C.cache=function(bl){var bm,bn;bm=[];bn=[w.Get(bl)];return{GetEnumerator:function(){return new x.New(0,null,function(bo){var bp;return bo.s+1<bm.length?(bo.s=bo.s+1,bo.c=bm[bo.s],true):(bp=bn[0],bh.Equals(bp,null)?false:bp.MoveNext()?(bo.s=bo.s+1,bo.c=bp.Current(),bm.push(bo.c),true):(bp.Dispose(),bn[0]=null,false));},void 0);}};};C.choose=function(bl,bm){var bn;bn=function(bo){var bp;bp=bl(bo);return bp==null?new _1({$:0}):D.ofArray([bp.$0]);};return function(bo){return C.collect(bn,bo);}(bm);};C.collect=function(bl,bm){return C.concat(C.map(bl,bm));};C.compareWith=function(bl,bm,bn){var bo,bp,bq,br,bs;bo=w.Get(bm);try{bq=w.Get(bn);try{br=0;bs=true;while(bs?br===0:false)if(bo.MoveNext()){if(bq.MoveNext())br=bl(bo.Current(),bq.Current());else br=1;}else if(bq.MoveNext())br=-1;else bs=false;bp=br;}finally{if("Dispose"in bq)bq.Dispose();}return bp;}finally{if("Dispose"in bo)bo.Dispose();}};C.concat=function(bl){return{GetEnumerator:function(){var bm;bm=w.Get(bl);return new x.New(null,null,function(bn){var bo;while(true){bo=bn.s;if(bh.Equals(bo,null)){if(bm.MoveNext()){bn.s=w.Get(bm.Current());bn=bn;}else{bm.Dispose();return false;}}else{if(bo.MoveNext()){bn.c=bo.Current();return true;}else{bn.Dispose();bn.s=null;bn=bn;}}}},function(bn){var bo;bo=bn.s;!bh.Equals(bo,null)?bo.Dispose():null;!bh.Equals(bm,null)?bm.Dispose():null;});}};};C.countBy=function(bl,bm){return C.delay(function(){return B.countBy(bl,B.ofSeq(bm));});};C.delay=function(bl){return{GetEnumerator:function(){return w.Get(bl());}};};C.distinct=function(bl){return C.distinctBy(a.id,bl);};C.distinctBy=function(bl,bm){return{GetEnumerator:function(){var bn,bo;bn=w.Get(bm);bo=new Z.New$3();return new x.New(null,null,function(bp){var bq,br;if(bn.MoveNext()){bq=bn.Current();br=bo.Add(bl(bq));while(!br?bn.MoveNext():false){bq=bn.Current();br=bo.Add(bl(bq));}return br?(bp.c=bq,true):false;}else return false;},function(){bn.Dispose();});}};};C.splitInto=function(bl,bm){bl<=0?_4.FailWith("Count must be positive"):null;return C.delay(function(){return B.splitInto(bl,B.ofSeq(bm));});};C.exactlyOne=function(bl){var bm,bn;bm=w.Get(bl);try{return bm.MoveNext()?(bn=bm.Current(),bm.MoveNext()?_4.InvalidOp("Sequence contains more than one element"):bn):_4.InvalidOp("Sequence contains no elements");}finally{if("Dispose"in bm)bm.Dispose();}};C.exists=function(bl,bm){var bn,bo;bn=w.Get(bm);try{bo=false;while(!bo?bn.MoveNext():false)bo=bl(bn.Current());return bo;}finally{if("Dispose"in bn)bn.Dispose();}};C.exists2=function(bl,bm,bn){var bo,bp,bq,br;bo=w.Get(bm);try{bq=w.Get(bn);try{br=false;while((!br?bo.MoveNext():false)?bq.MoveNext():false)br=bl(bo.Current(),bq.Current());bp=br;}finally{if("Dispose"in bq)bq.Dispose();}return bp;}finally{if("Dispose"in bo)bo.Dispose();}};C.filter=function(bl,bm){return{GetEnumerator:function(){var bn;bn=w.Get(bm);return new x.New(null,null,function(bo){var bp,bq,br;bp=bn.MoveNext();bq=bn.Current();br=false;while(bp)if(bl(bq)){bo.c=bq;br=true;bp=false;}else if(bn.MoveNext())bq=bn.Current();else bp=false;return br;},function(){bn.Dispose();});}};};C.find=function(bl,bm){var bn;bn=C.tryFind(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};C.findIndex=function(bl,bm){var bn;bn=C.tryFindIndex(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};C.fold=function(bl,bm,bn){var bo,bp;bo=bm;bp=w.Get(bn);try{while(bp.MoveNext())bo=bl(bo,bp.Current());return bo;}finally{if("Dispose"in bp)bp.Dispose();}};C.forall=function(bl,bm){return!C.exists(function(bn){return!bl(bn);},bm);};C.forall2=function(bl,bm,bn){return!C.exists2(function(bo,bp){return!bl(bo,bp);},bm,bn);};C.groupBy=function(bl,bm){return C.delay(function(){return B.groupBy(bl,B.ofSeq(bm));});};C.head=function(bl){var bm;bm=w.Get(bl);try{return bm.MoveNext()?bm.Current():C.insufficient();}finally{if("Dispose"in bm)bm.Dispose();}};C.init=function(bl,bm){return C.take(bl,C.initInfinite(bm));};C.initInfinite=function(bl){return{GetEnumerator:function(){return new x.New(0,null,function(bm){bm.c=bl(bm.s);bm.s=bm.s+1;return true;},void 0);}};};C.isEmpty=function(bl){var bm;bm=w.Get(bl);try{return!bm.MoveNext();}finally{if("Dispose"in bm)bm.Dispose();}};C.iter=function(bl,bm){var bn;bn=w.Get(bm);try{while(bn.MoveNext())bl(bn.Current());}finally{if("Dispose"in bn)bn.Dispose();}};C.iter2=function(bl,bm,bn){var bo,bp,bq;bo=w.Get(bm);try{bq=w.Get(bn);try{while(bo.MoveNext()?bq.MoveNext():false)bl(bo.Current(),bq.Current());bp=void 0;}finally{if("Dispose"in bq)bq.Dispose();}bp;}finally{if("Dispose"in bo)bo.Dispose();}};C.iteri=function(bl,bm){var bn,bo;bn=0;bo=w.Get(bm);try{while(bo.MoveNext()){bl(bn,bo.Current());bn=bn+1;}}finally{if("Dispose"in bo)bo.Dispose();}};C.length=function(bl){var bm,bn;bm=0;bn=w.Get(bl);try{while(bn.MoveNext())bm=bm+1;return bm;}finally{if("Dispose"in bn)bn.Dispose();}};C.map=function(bl,bm){return{GetEnumerator:function(){var bn;bn=w.Get(bm);return new x.New(null,null,function(bo){return bn.MoveNext()?(bo.c=bl(bn.Current()),true):false;},function(){bn.Dispose();});}};};C.mapi=function(bl,bm){return C.map2(bl,C.initInfinite(a.id),bm);};C.map2=function(bl,bm,bn){return{GetEnumerator:function(){var bo,bp;bo=w.Get(bm);bp=w.Get(bn);return new x.New(null,null,function(bq){return(bo.MoveNext()?bp.MoveNext():false)?(bq.c=bl(bo.Current(),bp.Current()),true):false;},function(){bo.Dispose();bp.Dispose();});}};};C.maxBy=function(bl,bm){return C.reduce(function(bn,bo){return bh.Compare(bl(bn),bl(bo))>=0?bn:bo;},bm);};C.minBy=function(bl,bm){return C.reduce(function(bn,bo){return bh.Compare(bl(bn),bl(bo))<=0?bn:bo;},bm);};C.max=function(bl){return C.reduce(function(bm,bn){return bh.Compare(bm,bn)>=0?bm:bn;},bl);};C.min=function(bl){return C.reduce(function(bm,bn){return bh.Compare(bm,bn)<=0?bm:bn;},bl);};C.nth=function(bl,bm){var bn,bo;if(bl<0)_4.FailWith("negative index requested");bn=-1;bo=w.Get(bm);try{while(bn<bl){!bo.MoveNext()?C.insufficient():null;bn=bn+1;}return bo.Current();}finally{if("Dispose"in bo)bo.Dispose();}};C.pairwise=function(bl){var bm;bm=function(bn){return[B.get(bn,0),B.get(bn,1)];};return function(bn){return C.map(bm,bn);}(C.windowed(2,bl));};C.pick=function(bl,bm){var bn;bn=C.tryPick(bl,bm);return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};C.readOnly=function(bl){return{GetEnumerator:function(){return w.Get(bl);}};};C.reduce=function(bl,bm){var bn,bo;bn=w.Get(bm);try{if(!bn.MoveNext())_4.FailWith("The input sequence was empty");bo=bn.Current();while(bn.MoveNext())bo=bl(bo,bn.Current());return bo;}finally{if("Dispose"in bn)bn.Dispose();}};C.scan=function(bl,bm,bn){return{GetEnumerator:function(){var bo,bp;bo=w.Get(bn);bp=function(){bo.Dispose();};return function(bq){return new x.New(false,null,bq,bp);}(function(bq){return bq.s?bo.MoveNext()?(bq.c=bl(bq.c,bo.Current()),true):false:(bq.c=bm,bq.s=true,true);});}};};C.skip=function(bl,bm){return{GetEnumerator:function(){var bn;bn=w.Get(bm);return new x.New(true,null,function(bo){var bp,bq;if(bo.s){for(bp=1,bq=bl;bp<=bq;bp++)if(!bn.MoveNext())C.insufficient();bo.s=false;}else null;return bn.MoveNext()?(bo.c=bn.Current(),true):false;},function(){bn.Dispose();});}};};C.skipWhile=function(bl,bm){return{GetEnumerator:function(){var bn;bn=w.Get(bm);return new x.New(true,null,function(bo){var bp,bq;if(bo.s){bp=true;bq=false;while(bp)if(bn.MoveNext()){if(!bl(bn.Current()))bp=false;}else{bp=false;bq=true;}bo.s=false;return bq?false:(bo.c=bn.Current(),true);}else return bn.MoveNext()?(bo.c=bn.Current(),true):false;},function(){bn.Dispose();});}};};C.sort=function(bl){return C.sortBy(a.id,bl);};C.sortBy=function(bl,bm){return C.delay(function(){var bn;bn=B.ofSeq(bm);B.sortInPlaceBy(bl,bn);return bn;});};C.sortByDescending=function(bl,bm){return C.delay(function(){var bn;bn=B.ofSeq(bm);B.sortInPlaceByDescending(bl,bn);return bn;});};C.sortDescending=function(bl){return C.sortByDescending(a.id,bl);};C.sum=function(bl){return C.fold(function(bm,bn){return bm+bn;},0,bl);};C.sumBy=function(bl,bm){return C.fold(function(bn,bo){return bn+bl(bo);},0,bm);};C.take=function(bl,bm){bl<0?C.nonNegative():null;return{GetEnumerator:function(){var bn;bn=[w.Get(bm)];return new x.New(0,null,function(bo){var bp;bo.s=bo.s+1;return bo.s>bl?false:(bp=bn[0],bh.Equals(bp,null)?C.insufficient():bp.MoveNext()?(bo.c=bp.Current(),bo.s===bl?(bp.Dispose(),void(bn[0]=null)):null,true):(bp.Dispose(),bn[0]=null,C.insufficient()));},function(){var bo;bo=bn[0];!bh.Equals(bo,null)?bo.Dispose():null;});}};};C.takeWhile=function(bl,bm){return C.delay(function(){return C.enumUsing(w.Get(bm),function(bn){return C.enumWhile(function(){return bn.MoveNext()?bl(bn.Current()):false;},C.delay(function(){return[bn.Current()];}));});});};C.truncate=function(bl,bm){return C.delay(function(){return C.enumUsing(w.Get(bm),function(bn){var bo;bo=[0];return C.enumWhile(function(){return bn.MoveNext()?bo[0]<bl:false;},C.delay(function(){_3.incr(bo);return[bn.Current()];}));});});};C.tryFind=function(bl,bm){var bn,bo,bp;bn=w.Get(bm);try{bo=null;while(bo==null?bn.MoveNext():false){bp=bn.Current();bl(bp)?void(bo={$:1,$0:bp}):null;}return bo;}finally{if("Dispose"in bn)bn.Dispose();}};C.findBack=function(bl,bm){var bn;bn=B.tryFindBack(bl,B.ofSeq(bm));return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};C.tryFindIndex=function(bl,bm){var bn,bo,bp;bn=w.Get(bm);try{bo=true;bp=0;while(bo?bn.MoveNext():false)if(bl(bn.Current()))bo=false;else bp=bp+1;return bo?null:{$:1,$0:bp};}finally{if("Dispose"in bn)bn.Dispose();}};C.findIndexBack=function(bl,bm){var bn;bn=B.tryFindIndexBack(bl,B.ofSeq(bm));return bn==null?_4.FailWith("KeyNotFoundException"):bn.$0;};C.tryPick=function(bl,bm){var bn,bo;bn=w.Get(bm);try{bo=null;while(bh.Equals(bo,null)?bn.MoveNext():false)bo=bl(bn.Current());return bo;}finally{if("Dispose"in bn)bn.Dispose();}};C.unfold=function(bl,bm){return{GetEnumerator:function(){return new x.New(bm,null,function(bn){var bo;bo=bl(bn.s);return bo==null?false:(bn.c=bo.$0[0],bn.s=bo.$0[1],true);},void 0);}};};C.windowed=function(bl,bm){bl<=0?_4.FailWith("The input must be positive."):null;return C.delay(function(){return C.enumUsing(w.Get(bm),function(bn){var bo;bo=[];return C.append(C.enumWhile(function(){return bo.length<bl?bn.MoveNext():false;},C.delay(function(){bo.push(bn.Current());return[];})),C.delay(function(){return bo.length===bl?C.append([bo.slice(0)],C.delay(function(){return C.enumWhile(function(){return bn.MoveNext();},C.delay(function(){bo.shift();bo.push(bn.Current());return[bo.slice(0)];}));})):[];}));});});};C.zip=function(bl,bm){return C.map2(function(bn,bo){return[bn,bo];},bl,bm);};C.map3=function(bl,bm,bn,bo){return{GetEnumerator:function(){var bp,bq,br;bp=w.Get(bm);bq=w.Get(bn);br=w.Get(bo);return new x.New(null,null,function(bs){return((bp.MoveNext()?bq.MoveNext():false)?br.MoveNext():false)?(bs.c=bl(bp.Current(),bq.Current(),br.Current()),true):false;},function(){bp.Dispose();bq.Dispose();br.Dispose();});}};};C.zip3=function(bl,bm,bn){return C.map3(function(bo,bp,bq){return[bo,bp,bq];},bl,bm,bn);};C.fold2=function(bl,bm,bn,bo){return B.fold2(bl,bm,B.ofSeq(bn),B.ofSeq(bo));};C.foldBack=function(bl,bm,bn){return B.foldBack(bl,B.ofSeq(bm),bn);};C.foldBack2=function(bl,bm,bn,bo){return B.foldBack2(bl,B.ofSeq(bm),B.ofSeq(bn),bo);};C.iteri2=function(bl,bm,bn){var bo,bp,bq,br;bo=0;bp=w.Get(bm);try{br=w.Get(bn);try{while(bp.MoveNext()?br.MoveNext():false){bl(bo,bp.Current(),br.Current());bo=bo+1;}bq=void 0;}finally{if("Dispose"in br)br.Dispose();}bq;}finally{if("Dispose"in bp)bp.Dispose();}};C.mapi2=function(bl,bm,bn){return C.map3(function(bo,bp,bq){return((bl(bo))(bp))(bq);},C.initInfinite(a.id),bm,bn);};C.mapFold=function(bl,bm,bn){return B.mapFold(bl,bm,B.ofSeq(bn));};C.mapFoldBack=function(bl,bm,bn){return B.mapFoldBack(bl,B.ofSeq(bm),bn);};C.permute=function(bl,bm){return C.delay(function(){return B.permute(bl,B.ofSeq(bm));});};C.reduceBack=function(bl,bm){return B.reduceBack(bl,B.ofSeq(bm));};C.replicate=function(bl,bm){bl<0?C.nonNegative():null;return C.delay(function(){return C.map(function(){return bm;},_4.range(0,bl-1));});};C.rev=function(bl){return C.delay(function(){return B.ofSeq(bl).slice().reverse();});};C.scanBack=function(bl,bm,bn){return C.delay(function(){return B.scanBack(bl,B.ofSeq(bm),bn);});};C.indexed=function(bl){return C.mapi(function(bm,bn){return[bm,bn];},bl);};C.sortWith=function(bl,bm){return C.delay(function(){var bn;bn=B.ofSeq(bm);B.sortInPlaceWith(bl,bn);return bn;});};C.tail=function(bl){return C.skip(1,bl);};bc.CopyTo=function(bl,bm,bn){B.blit(bm,0,bm,bn,B.length(bl));};bc.Contains=function(bl,bm){return C.exists(function(bn){return bh.Equals(bm,bn);},bl);};bc.Clear=function(bl){bl.splice(0,B.length(bl));};bd.RegexEscape=function(bl){return bl.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bd.SplitWith=function(bl,bm){return bl.split(bm);};bd.Join=function(bl,bm){return bm.join(bl);};bd.TrimEndWS=function(bl){return bl.replace(new a.RegExp("\\s+$"),"");};bd.TrimStartWS=function(bl){return bl.replace(new a.RegExp("^\\s+"),"");};bd.Trim=function(bl){return bl.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bd.StartsWith=function(bl,bm){return bl.substring(0,bm.length)==bm;};bd.Substring=function(bl,bm,bn){return bl.substr(bm,bn);};bd.ReplaceOnce=function(bl,bm,bn){return bl.replace(bm,bn);};bd.Remove=function(bl,bm,bn){return bl.substring(0,bm)+bl.substring(bm+bn);};bd.PadRightWith=function(bl,bm,bn){return bm>bl.length?bl+a.Array(bm-bl.length+1).join(a.String.fromCharCode(bn)):bl;};bd.PadLeftWith=function(bl,bm,bn){return bm>bl.length?a.Array(bm-bl.length+1).join(a.String.fromCharCode(bn))+bl:bl;};bd.LastIndexOf=function(bl,bm,bn){return bl.lastIndexOf(a.String.fromCharCode(bm),bn);};bd.IsNullOrWhiteSpace=function(bl){return bl==null||(new a.RegExp("^\\s*$")).test(bl);};bd.IsNullOrEmpty=function(bl){return bl==null||bl=="";};bd.Insert=function(bl,bm,bn){return bl.substring(0,bm-1)+bn+bl.substring(bm);};bd.IndexOf=function(bl,bm,bn){return bl.indexOf(a.String.fromCharCode(bm),bn);};bd.EndsWith=function(bl,bm){return bl.substring(bl.length-bm.length)==bm;};bd.collect=function(bl,bm){return B.init(bm.length,function(bn){return bl(bm.charCodeAt(bn));}).join("");};bd.concat=function(bl,bm){return B.ofSeq(bm).join(bl);};bd.exists=function(bl,bm){return C.exists(bl,bd.protect(bm));};bd.forall=function(bl,bm){return C.forall(bl,bd.protect(bm));};bd.init=function(bl,bm){return B.init(bl,bm).join("");};bd.iter=function(bl,bm){C.iter(bl,bd.protect(bm));};bd.iteri=function(bl,bm){C.iteri(bl,bd.protect(bm));};bd.length=function(bl){return bd.protect(bl).length;};bd.map=function(bl,bm){return bd.collect(function(bn){return bk.fromCharCode(bl(bn));},bd.protect(bm));};bd.mapi=function(bl,bm){return B.ofSeq(C.mapi(function(bn,bo){return bk.fromCharCode(bl(bn,bo));},bm)).join("");};bd.replicate=function(bl,bm){return bd.init(bl,function(){return bm;});};bd.protect=function(bl){return bl===null?"":bl;};bd.SFormat=function(bl,bm){var bn,bo;bn=new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g");bo=function(bp,bq,br){var bs,bt,bu;bs=bk(B.get(bm,+bq));return!bh.Equals(br,void 0)?(bt=+br,(bu=a.Math.abs(bt),bu>bs.length?bt>0?bd.PadLeft(bs,bu):bd.PadRight(bs,bu):bs)):bs;};return function(bp){return bp.replace(bn,bo);}(bl);};bd.Filter=function(bl,bm){var bn;return B.ofSeq((bn=function(bo){return bl(bo)?{$:1,$0:bk.fromCharCode(bo)}:null;},function(bo){return C.choose(bn,bo);}(bm))).join("");};bd.SplitStrings=function(bl,bm,bn){var bo;bo=bd.concat("|",B.map(bd.RegexEscape,bm));return bd.Split(bl,new a.RegExp(bo),bn);};bd.SplitChars=function(bl,bm,bn){var bo;bo="["+bd.RegexEscape(a.String.fromCharCode.apply(void 0,bm))+"]";return bd.Split(bl,new a.RegExp(bo),bn);};bd.Split=function(bl,bm,bn){var bo;bo=bd.SplitWith(bl,bm);return bn===1?B.filter(function(bp){return bp!=="";},bo):bo;};bd.TrimEnd=function(bl,bm){var bn,bo,bp;if(bh.Equals(bm,null)?true:bm.length==0)return bd.TrimEndWS(bl);else{bn=bl.length-1;bo=true;while(bn>=0?bo:false)(function(){var bq,br;bq=bl.charCodeAt(bn);return(br=function(bs){return bq===bs;},function(bs){return B.exists(br,bs);}(bm))?void(bn=bn-1):void(bo=false);}());bp=bn+1;return bd.Substring(bl,0,bp);}};bd.TrimStart=function(bl,bm){var bn,bo;if(bh.Equals(bm,null)?true:bm.length==0)return bd.TrimStartWS(bl);else{bn=0;bo=true;while(bn<bl.length?bo:false)(function(){var bp,bq;bp=bl.charCodeAt(bn);return(bq=function(br){return bp===br;},function(br){return B.exists(bq,br);}(bm))?void(bn=bn+1):void(bo=false);}());return bl.substring(bn);}};bd.ToCharArrayRange=function(bl,bm,bn){return B.init(bn,function(bo){return bl.charCodeAt(bm+bo);});};bd.ToCharArray=function(bl){return B.init(bl.length,function(bm){return bl.charCodeAt(bm);});};bd.ReplaceChar=function(bl,bm,bn){return bd.Replace(bl,bk.fromCharCode(bm),bk.fromCharCode(bn));};bd.Replace=function(bl,bm,bn){function bo(bp){var bq,br,bs,bt;bq=bp.indexOf(bm);return bq!==-1?(br=bd.ReplaceOnce(bp,bm,bn),(bs=bq+bn.length,(bt=bq+bn.length,bd.Substring(br,0,bt))+bo(br.substring(bs)))):bp;}return bo(bl);};bd.PadRight=function(bl,bm){return bd.PadRightWith(bl,bm,32);};bd.PadLeft=function(bl,bm){return bd.PadLeftWith(bl,bm,32);};bd.CopyTo=function(bl,bm,bn,bo,bp){B.blit(bd.ToCharArray(bl),bm,bn,bo,bp);};bd.Compare=function(bl,bm){return _4.Compare(bl,bm);};be=b.Task=bj.Class({Execute:function(){this.action();},Start:function(){var bl;bl=this;bh.Equals(this.status,0)?(this.status=2,t.scheduler().Fork(function(){var bm;bl.status=3;try{bl.Execute();bl.status=5;}catch(bn){(bn instanceof Q?bh.Equals(bn.ct,bl.token)?(bm=bn,true):false:false)?(a.console.log.apply(a.console,["Task cancellation caught:"].concat([bm])),bl.exc=new U.New$3([bm]),bl.status=6):(a.console.log.apply(a.console,["Task error caught:"].concat([bn])),bl.exc=new U.New$3([bn]),bl.status=7);}bl.RunContinuations();})):_4.InvalidOp("Task not in initial state");},StartContinuation:function(){var bl;bl=this;bh.Equals(this.status,1)?(this.status=2,t.scheduler().Fork(function(){if(bh.Equals(bl.status,2)){bl.status=3;try{bl.Execute();bl.status=5;}catch(bm){bl.exc=new U.New$3([bm]);bl.status=7;}bl.RunContinuations();}})):null;},ContinueWith:function(bl,bm){var bn,bo,bp;bn=this;bo=new bf.New(function(){return bl(bn);},bm,1,null,void 0);this.get_IsCompleted()?bo.StartContinuation():(bp=this.continuations.push(bo),void 0);return bo;},ContinueWith$1:function(bl,bm){var bn,bo,bp;bn=this;bo=new be.New$2(function(){return bl(bn);},bm,1,null);this.get_IsCompleted()?bo.StartContinuation():(bp=this.continuations.push(bo),void 0);return bo;},ContinueWith$2:function(bl){return this.ContinueWith$1(bl,t.noneCT());},RunContinuations:function(){var bl,bm,bn;bl=this.continuations;for(bm=0,bn=bl.length-1;bm<=bn;bm++)B.get(bl,bm).StartContinuation();},OnCompleted:function(bl){var bm;if(this.get_IsCompleted())bl();else{bh.Equals(this.get_Status(),0)?this.Start():null;bm=this.ContinueWith$2(function(){return bl();});}},get_Status:function(){return this.status;},get_IsFaulted:function(){return bh.Equals(this.status,7);},get_IsCompleted:function(){return(bh.Equals(this.status,5)?true:bh.Equals(this.status,7))?true:bh.Equals(this.status,6);},get_IsCanceled:function(){return bh.Equals(this.status,6);},get_Exception:function(){return this.exc;}},null,be);be.WhenAll=function(bl){var bm,bn,bo,bp,bq,br;bm=B.length(bl);bn=[0];bo=new a.Array(bm);bp=new bg.New();for(bq=0,br=bm-1;bq<=br;bq++)(function(bs){var bt;bt=B.get(bl,bq).ContinueWith$2(function(bu){var bv,bw;return bu.get_IsFaulted()?(bv=bp.TrySetException$1(bu.get_Exception()),void 0):bu.get_IsCanceled()?(bw=bp.TrySetCanceled$1(),void 0):(_3.incr(bn),bo[bs]=bu.get_Result(),bn[0]===bm?bp.SetResult(bo):null);});}(bq));return bp.get_Task();};be.WhenAll$1=function(bl){var bm,bn,bo,bp,bq,br;bm=B.length(bl);bn=[0];bo=new bg.New();for(bp=0,bq=bm-1;bp<=bq;bp++){br=B.get(bl,bp).ContinueWith$2(function(bs){var bt,bu,bv;return bs.get_IsFaulted()?(bt=bo.TrySetException$1(bs.get_Exception()),void 0):bs.get_IsCanceled()?(bu=bo.TrySetCanceled$1(),void 0):(_3.incr(bn),bn[0]===bm?(bv=bo.TrySetResult(),void 0):null);});}return bo.get_Task();};be.WhenAny=function(bl){var bm,bn,bo,bp,bq;bm=new bg.New();for(bn=0,bo=bl.length-1;bn<=bo;bn++){bp=B.get(bl,bn);bq=bp.ContinueWith(function(br){var bs;bs=bm.TrySetResult(br);},t.noneCT());}return bm.get_Task();};be.WhenAny$1=function(bl){var bm,bn,bo,bp,bq;bm=new bg.New();for(bn=0,bo=bl.length-1;bn<=bo;bn++){bp=B.get(bl,bn);bq=bp.ContinueWith$2(function(br){var bs;bs=bm.TrySetResult(br);});}return bm.get_Task();};be.Delay=function(bl,bm){var bn;bn=t.Sleep(bl);return t.StartAsTask(bn,{$:1,$0:bm});};be.Delay$1=function(bl){var bm;bm=t.Sleep(bl);return t.StartAsTask(bm,null);};be.Run=function(bl,bm){var bn;bn=bl();return bm.c?be.FromCanceled(bm):(bh.Equals(bn.get_Status(),0)?bn.Start():null,bn);};be.Run$1=function(bl,bm){var bn;bn=new bf.New(bl,bm,0,null,void 0);bn.Start();return bn;};be.Run$2=function(bl,bm){var bn;bn=bl();return bm.c?be.FromCanceled$1(bm):(bh.Equals(bn.get_Status(),0)?bn.Start():null,bn);};be.Run$3=function(bl,bm){var bn;bn=new be.New$2(bl,bm,0,null);bn.Start();return bn;};be.FromResult=function(bl){return new bf.New(null,t.noneCT(),5,null,bl);};be.FromException=function(bl){return new bf.New(null,t.noneCT(),7,new U.New$3([bl]),null);};be.FromException$1=function(bl){return new be.New$2(null,t.noneCT(),7,new U.New$3([bl]));};be.FromCanceled=function(bl){return new bf.New(null,bl,6,null,null);};be.FromCanceled$1=function(bl){return new be.New$2(null,bl,6,null);};be.New=bj.Ctor(function(bl,bm){be.New$2.call(this,bl,bm,0,null);},be);be.New$1=bj.Ctor(function(bl){be.New$2.call(this,bl,t.noneCT(),0,null);},be);be.New$2=bj.Ctor(function(bl,bm,bn,bo){this.action=bl;this.token=bm;this.status=bn;this.continuations=[];this.exc=bo;null;},be);bf=b.Task1=bj.Class({get_Result:function(){return this.result;},Execute:function(){this.result=this.func();}},be,bf);bf.New=bj.Ctor(function(bl,bm,bn,bo,bp){be.New$2.call(this,null,bm,bn,bo);this.func=bl;this.result=bp;null;},bf);bg=b.TaskCompletionSource=bj.Class({TrySetResult:function(bl){return!this.task.get_IsCompleted()?(this.task.status=5,this.task.result=bl,this.task.RunContinuations(),true):false;},TrySetException:function(bl){return this.TrySetException$1(new U.New$2(bl));},TrySetException$1:function(bl){return!this.task.get_IsCompleted()?(this.task.status=7,this.task.exc=new U.New$3([bl]),this.task.RunContinuations(),true):false;},TrySetCanceled:function(bl){return!this.task.get_IsCompleted()?(this.task.status=6,this.task.RunContinuations(),true):false;},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()?(this.task.status=6,this.task.RunContinuations(),true):false;},SetResult:function(bl){this.task.get_IsCompleted()?_4.FailWith("Task already completed."):null;this.task.status=5;this.task.result=bl;this.task.RunContinuations();},SetException:function(bl){this.SetException$1(new U.New$2(bl));},SetException$1:function(bl){this.task.get_IsCompleted()?_4.FailWith("Task already completed."):null;this.task.status=7;this.task.exc=new U.New$3([bl]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?_4.FailWith("Task already completed."):null;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},null,bg);bg.New=bj.Ctor(function(){this.task=new bf.New(null,t.noneCT(),1,null,void 0);null;},bg);bh.Hash=function(bl){var bm;bm=typeof bl;return bm=="function"?0:bm=="boolean"?bl?1:0:bm=="number"?bl:bm=="string"?bh.hashString(bl):bm=="object"?bl==null?0:bl instanceof a.Array?bh.hashArray(bl):bh.hashObject(bl):0;};bh.hashObject=function(bl){var bm,bn;return"GetHashCode"in bl?bl.GetHashCode():(bm=bh.hashMix,(bn=[0],(d.ForEach(bl,function(bo){bn[0]=bm(bm(bn[0],bh.hashString(bo)),bh.Hash(bl[bo]));return false;}),bn[0])));};bh.hashString=function(bl){var bm,bn,bo;if(bl===null)return 0;else{bm=5381;for(bn=0,bo=bl.length-1;bn<=bo;bn++)bm=bh.hashMix(bm,bl.charCodeAt(bn)<<0);return bm;}};bh.hashArray=function(bl){var bm,bn,bo;bm=-34948909;for(bn=0,bo=B.length(bl)-1;bn<=bo;bn++)bm=bh.hashMix(bm,bh.Hash(B.get(bl,bn)));return bm;};bh.hashMix=function(bl,bm){return(bl<<5)+bl+bm;};bh.Equals=function(bl,bm){var bn,bo;return bl===bm?true:(bn=typeof bl,bn=="object"?(((bl===null?true:bl===void 0)?true:bm===null)?true:bm===void 0)?false:"Equals"in bl?bl.Equals(bm):(bl instanceof a.Array?bm instanceof a.Array:false)?bh.arrayEquals(bl,bm):(bl instanceof a.Date?bm instanceof a.Date:false)?bh.dateEquals(bl,bm):(bo=[true],(d.ForEach(bl,function(bp){bo[0]=!bl.hasOwnProperty(bp)?true:bm.hasOwnProperty(bp)?bh.Equals(bl[bp],bm[bp]):false;return!bo[0];}),bo[0]?d.ForEach(bm,function(bp){bo[0]=!bm.hasOwnProperty(bp)?true:bl.hasOwnProperty(bp);return!bo[0];}):null,bo[0])):bn=="function"?"$Func"in bl?bl.$Func===bm.$Func?bl.$Target===bm.$Target:false:("$Invokes"in bl?"$Invokes"in bm:false)?bh.arrayEquals(bl.$Invokes,bm.$Invokes):false:false);};bh.dateEquals=function(bl,bm){return bl.getTime()===bm.getTime();};bh.arrayEquals=function(bl,bm){var bn,bo;if(B.length(bl)===B.length(bm)){bn=true;bo=0;while(bn?bo<B.length(bl):false){!bh.Equals(B.get(bl,bo),B.get(bm,bo))?void(bn=false):null;bo=bo+1;}return bn;}else return false;};bh.Compare=function(bl,bm){var bn,bo,bp;if(bl===bm)return 0;else{bo=typeof bl;switch(bo=="function"?1:bo=="boolean"?2:bo=="number"?2:bo=="string"?2:bo=="object"?3:0){case 0:return typeof bm=="undefined"?0:-1;break;case 1:return _4.FailWith("Cannot compare function values.");break;case 2:return bl<bm?-1:1;break;case 3:return bl===null?-1:bm===null?1:"CompareTo"in bl?bl.CompareTo(bm):"CompareTo0"in bl?bl.CompareTo0(bm):(bl instanceof a.Array?bm instanceof a.Array:false)?bh.compareArrays(bl,bm):(bl instanceof a.Date?bm instanceof a.Date:false)?bh.compareDates(bl,bm):(bp=[0],d.ForEach(bl,function(bq){return!bl.hasOwnProperty(bq)?false:!bm.hasOwnProperty(bq)?(bp[0]=1,true):(bp[0]=bh.Compare(bl[bq],bm[bq]),bp[0]!==0);}),bp[0]===0?d.ForEach(bm,function(bq){return!bm.hasOwnProperty(bq)?false:!bl.hasOwnProperty(bq)?(bp[0]=-1,true):false;}):null,bp[0]);break;}}};bh.compareDates=function(bl,bm){return _4.Compare(bl.getTime(),bm.getTime());};bh.compareArrays=function(bl,bm){var bn,bo;if(B.length(bl)<B.length(bm))return -1;else if(B.length(bl)>B.length(bm))return 1;else{bn=0;bo=0;while(bn===0?bo<B.length(bl):false){bn=bh.Compare(B.get(bl,bo),B.get(bm,bo));bo=bo+1;}return bn;}};}());
